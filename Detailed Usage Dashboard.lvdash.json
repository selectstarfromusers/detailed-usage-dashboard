{"datasets":[{"name":"7c7ab2c7","displayName":"es_usage_agg","query":"WITH AGG AS (\n  select\n    u.usage_date,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(\n          sum(p.pricing.effective_list.default * u.usage_quantity * ((100 - :aws_discount) / 100))\n        ) OVER (ORDER BY DATE_TRUNC('month', u.usage_date))\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(\n          sum(p.pricing.effective_list.default * u.usage_quantity * ((100 - :azure_discount) / 100))\n        ) OVER (ORDER BY DATE_TRUNC('month', u.usage_date))\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(\n          sum(p.pricing.effective_list.default * u.usage_quantity * ((100 - :gcp_discount) / 100))\n        ) OVER (ORDER BY DATE_TRUNC('month', u.usage_date))\n      ELSE sum(sum(p.pricing.effective_list.default * u.usage_quantity)) OVER (\n            ORDER BY DATE_TRUNC('month', u.usage_date)\n          )\n    END AS Running_Total\n  from\n    system.billing.usage u\n      left join system.billing.list_prices as p\n        on u.sku_name = p.sku_name\n        and p.currency_code = 'USD'\n        and u.account_id = p.account_id\n        and u.usage_unit = p.usage_unit\n        and u.cloud = p.cloud\n        and (\n          u.usage_end_time between\n            p.price_start_time\n          and\n            coalesce(p.price_end_time, date_add(current_date, 1))\n        )\n  where\n    u.usage_date between :start_date and :end_date\n  group by\n    u.usage_date,\n    u.cloud\n  order by\n    usage_date\n),\nAIF AS (\n  SELECT\n    *\n  FROM\n    AI_FORECAST(\n      TABLE(AGG),\n      horizon =>\n        ADD_MONTHS(\n          (\n            select\n              max(usage_date) as max\n            from\n              AGG\n          ),\n          MONTHS_BETWEEN(:end_date, :start_date)\n          - MONTHS_BETWEEN(\n            (\n              select\n                max(usage_date) as max\n              from\n                AGG\n            ),\n            :start_date\n          )\n        ),\n      value_col => 'Total_Discounted',\n      time_col => 'usage_date',\n      parameters => '{\"global_floor\": 0}'\n    )\n),\nCOMBO AS (\n  select\n    usage_date,\n    'Actual' as RType,\n    total_discounted,\n    0 as total_discounted_forecast,\n    0 as total_discounted_upper,\n    total_discounted as total_discounted_combined\n  from\n    agg\n  union\n  select\n    usage_date,\n    'Forecast' as RType,\n    0 as total_discounted,\n    total_discounted_forecast,\n    total_discounted_upper,\n    total_discounted_forecast as total_discounted_combined\n  from\n    aif\n)\nselect\n  usage_date,\n  RType,\n  total_discounted,\n  total_discounted_forecast,\n  total_discounted_upper,\n  sum(total_discounted_combined) OVER (\n      ORDER BY year(usage_date), month(usage_date)\n    ) as Running_Total,\n  :commit as commit\nfrom\n  COMBO\norder by\n  usage_date desc","parameters":[{"displayName":"Contract Commit","keyword":"commit","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"2025-01-01T00:00:00.000"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"2025-12-31T00:00:00.000"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"0037dc6d","displayName":"es_usage_agg_2","query":"select\n  COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n  u.usage_date,\n  u.billing_origin_product,\n  sum(p.pricing.effective_list.default * u.usage_quantity) as Total_DDBUs,\n  CASE\n    WHEN lower(u.cloud) = 'aws' THEN Total_DDBUs * ((100 - :aws_discount) / 100)\n    WHEN lower(u.cloud) = 'azure' THEN Total_DDBUs * ((100 - :azure_discount) / 100)\n    WHEN lower(u.cloud) = 'gcp' THEN Total_DDBUs * ((100 - :gcp_discount) / 100)\n    ELSE Total_DDBUs\n  END as Total_Discounted,\n  CASE\n    WHEN lower(u.cloud) = 'aws'\n    THEN sum(\n        sum(p.pricing.effective_list.default * u.usage_quantity * ((100 - :aws_discount) / 100))\n      ) OVER (ORDER BY DATE_TRUNC('month', u.usage_date))\n    WHEN lower(u.cloud) = 'azure'\n    THEN sum(\n        sum(p.pricing.effective_list.default * u.usage_quantity * ((100 - :azure_discount) / 100))\n      ) OVER (ORDER BY DATE_TRUNC('month', u.usage_date))\n    WHEN lower(u.cloud) = 'gcp'\n    THEN sum(\n        sum(p.pricing.effective_list.default * u.usage_quantity * ((100 - :gcp_discount) / 100))\n      ) OVER (ORDER BY DATE_TRUNC('month', u.usage_date))\n    ELSE sum(sum(p.pricing.effective_list.default * u.usage_quantity)) OVER (\n          ORDER BY DATE_TRUNC('month', u.usage_date)\n        )\n  END AS Running_Total,\n  max(:commit) as Commit\nfrom\n  system.billing.usage u\n    left join system.billing.list_prices as p\n      on u.sku_name = p.sku_name\n      and p.currency_code = 'USD'\n      and u.account_id = p.account_id\n      and u.usage_unit = p.usage_unit\n      and u.cloud = p.cloud\n      and (\n        u.usage_end_time between\n          p.price_start_time\n        and\n          coalesce(p.price_end_time, date_add(current_date, 1))\n      )\n    LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n      ON u.workspace_id = wn.workspace_id\nwhere\n  u.usage_date between :start_date and :end_date\n  AND IF(\n    :workspace = '<ALL WORKSPACES>', TRUE, COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n  )\ngroup by\n  u.cloud,\n  COALESCE(wn.workspace_name, u.workspace_id),\n  u.usage_date,\n  u.billing_origin_product","parameters":[{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-12M/M"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"Contract Commit","keyword":"commit","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}}]},{"name":"8c54b818","displayName":"de_perf_agg_compute","query":"WITH DEAGG AS (\n  select\n    coalesce(wn.workspace_name, c.workspace_id) as workspace,\n    c.cluster_id,\n    cn.cluster_name,\n    create_time,\n    delete_time,\n    c.driver_node_type,\n    c.worker_node_type,\n    c.worker_count,\n    c.min_autoscale_workers,\n    c.max_autoscale_workers,\n    c.dbr_version,\n    nt.start_time,\n    nt.end_time,\n    nt.cpu_user_percent,\n    nt.cpu_system_percent,\n    nt.cpu_wait_percent,\n    nt.mem_swap_percent,\n    nt.mem_used_percent,\n    nt.node_type,\n    row_number() over (partition by c.cluster_id order by c.change_time desc) as rn\n  from\n    system.compute.node_timeline nt\n      join system.compute.clusters c\n        on nt.workspace_id = c.workspace_id\n        and nt.cluster_id = c.cluster_id\n      JOIN (\n        SELECT\n          workspace_id,\n          cluster_id,\n          cluster_name,\n          ROW_NUMBER() OVER (PARTITION BY cluster_id ORDER BY change_time DESC) as rn\n        FROM\n          system.compute.clusters\n      ) cn\n        ON nt.workspace_id = cn.workspace_id\n        and nt.cluster_id = cn.cluster_id\n        and cn.rn = 1\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON c.workspace_id = wn.workspace_id\n  where\n    cluster_source <> 'PIPELINE_MAINTENANCE'\n    and c.delete_time is null\n    and (\n      nt.end_time between :start_date and :end_date\n      or nt.end_time is null\n    )\n    and if(\n      :workspace = '<ALL WORKSPACES>',\n      true,\n      coalesce(c.workspace_id, wn.workspace_name) = :workspace\n    )\n)\nSELECT\n  cluster_name,\n  avg(IDENTIFIER(:rank_by)) AS avg_mem_swap_percent\nFROM\n  DEAGG\nwhere\n  rn = 1\n  and IDENTIFIER(:rank_by) is not null\ngroup by\n  cluster_name\norder by\n  avg(IDENTIFIER(:rank_by)) desc\nlimit :top_n","parameters":[{"displayName":"start_date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-30d/d"}]}}},{"displayName":"end_date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"rank_by","keyword":"rank_by","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"mem_swap_percent"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}}]},{"name":"586c4aa4","displayName":"de_perf_agg_query","query":"WITH DEAGG AS (\n  SELECT\n    COALESCE(wn.workspace_name, h.workspace_id) AS workspace,\n    h.statement_id,\n    h.executed_by,\n    h.executed_as,\n    h.session_id,\n    h.execution_status,\n    h.compute.type as compute_type,\n    coalesce(h.compute.cluster_id, h.compute.warehouse_id) as compute_id,\n    coalesce(c.cluster_name, w.warehouse_name) as compute_name,\n    h.statement_text,\n    h.statement_type,\n    h.error_message,\n    coalesce(h.client_application, h.client_driver) AS client_application,\n    h.client_driver,\n    h.total_duration_ms,\n    h.waiting_for_compute_duration_ms,\n    h.waiting_at_capacity_duration_ms,\n    h.execution_duration_ms,\n    h.compilation_duration_ms,\n    h.total_task_duration_ms,\n    h.result_fetch_duration_ms,\n    h.start_time,\n    h.end_time,\n    h.update_time,\n    h.read_partitions,\n    h.pruned_files,\n    h.read_files,\n    h.read_rows,\n    h.produced_rows,\n    h.read_bytes,\n    h.read_io_cache_percent,\n    h.from_result_cache,\n    h.spilled_local_bytes,\n    h.written_bytes,\n    h.shuffle_read_bytes,\n    h.query_source.*\n  FROM\n    system.query.history h\n      LEFT JOIN system.compute.clusters c\n        ON h.workspace_id = c.workspace_id\n        AND h.compute.cluster_id = c.cluster_id\n      LEFT JOIN system.compute.warehouses w\n        ON h.workspace_id = w.workspace_id\n        AND h.compute.warehouse_id = w.warehouse_id\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON h.workspace_id = wn.workspace_id\n  WHERE\n    h.end_time BETWEEN :start_date AND :end_date\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, h.workspace_id) = :workspace\n    )\n  GROUP BY\n    ALL\n)\nSELECT\n  workspace,\n  statement_id,\n  executed_by,\n  executed_as,\n  session_id,\n  execution_status,\n  compute_type,\n  compute_id,\n  compute_name,\n  statement_text,\n  statement_type,\n  error_message,\n  client_application,\n  client_driver,\n  total_duration_ms,\n  waiting_for_compute_duration_ms,\n  waiting_at_capacity_duration_ms,\n  execution_duration_ms,\n  compilation_duration_ms,\n  total_task_duration_ms,\n  result_fetch_duration_ms,\n  start_time,\n  end_time,\n  update_time,\n  read_partitions,\n  pruned_files,\n  read_files,\n  read_rows,\n  produced_rows,\n  read_bytes,\n  read_io_cache_percent,\n  from_result_cache,\n  spilled_local_bytes,\n  written_bytes,\n  shuffle_read_bytes,\n  job_info,\n  legacy_dashboard_id,\n  dashboard_id,\n  alert_id,\n  notebook_id,\n  sql_query_id,\n  genie_space_id\nFROM\n  DEAGG\nORDER BY\n  IDENTIFIER(:rank_by) DESC\nLIMIT :top_n","parameters":[{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-30d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"rank_by","keyword":"rank_by","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"spilled_local_bytes"}]}}}]},{"name":"59f9671b","displayName":"de_usage_agg_compute_isql","query":"WITH DEAGG AS (\n  SELECT\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n    CASE\n      WHEN CONTAINS(u.sku_name, 'SERVERLESS_SQL') THEN 'SERVERLESS SQL'\n      WHEN CONTAINS(u.sku_name, 'ENTERPRISE_SQL') THEN 'SQL'\n      WHEN CONTAINS(u.sku_name, 'PREMIUM_SQL') THEN 'SQL'\n      WHEN CONTAINS(u.sku_name, 'STANDARD_SQL') THEN 'SQL'\n      WHEN CONTAINS(u.sku_name, 'ALL_PURPOSE_COMPUTE') THEN 'ALL PURPOSE'\n      ELSE 'OTHER'\n    END AS compute_type,\n    CASE\n      WHEN\n        CONTAINS(u.sku_name, 'SERVERLESS_SQL')\n        OR CONTAINS(u.sku_name, 'ENTERPRISE_SQL')\n        OR CONTAINS(u.sku_name, 'PREMIUM_SQL')\n        OR CONTAINS(u.sku_name, 'STANDARD_SQL')\n      THEN whn.warehouse_name\n      WHEN CONTAINS(u.sku_name, 'ALL_PURPOSE_COMPUTE') THEN cn.cluster_name\n      ELSE 'OTHER'\n    END AS compute_name,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted\n  FROM\n    system.billing.usage u\n      LEFT JOIN (\n        SELECT\n          workspace_id,\n          cluster_id,\n          cluster_name,\n          ROW_NUMBER() OVER (PARTITION BY cluster_id ORDER BY change_time DESC) as rn\n        FROM\n          system.compute.clusters\n      ) cn\n        ON u.workspace_id = cn.workspace_id\n        and u.usage_metadata.cluster_id = cn.cluster_id\n        and cn.rn = 1\n      LEFT JOIN (\n        SELECT\n          workspace_id,\n          warehouse_id,\n          warehouse_name,\n          ROW_NUMBER() OVER (PARTITION BY warehouse_id ORDER BY change_time DESC) as rn\n        FROM\n          system.compute.warehouses\n      ) whn\n        ON u.workspace_id = whn.workspace_id\n        and u.usage_metadata.warehouse_id = whn.warehouse_id\n        and whn.rn = 1\n      LEFT JOIN system.billing.list_prices AS p\n        ON u.sku_name = p.sku_name\n        AND p.currency_code = 'USD'\n        AND u.account_id = p.account_id\n        AND u.usage_unit = p.usage_unit\n        AND u.cloud = p.cloud\n        AND (\n          u.usage_end_time BETWEEN\n            p.price_start_time\n          AND\n            COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n        )\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON u.workspace_id = wn.workspace_id\n  WHERE\n    u.usage_date BETWEEN :start_date AND :end_date\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n  GROUP BY\n    u.cloud,\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id),\n    compute_type,\n    compute_name\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    compute_type,\n    compute_name,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n  WHERE\n    compute_type IN ('SQL', 'SERVERLESS SQL', 'ALL PURPOSE')\n),\nISTOPN AS (\n  SELECT\n    compute_name,\n    SUM(total_discounted) AS td\n  FROM\n    TOTALS\n  GROUP BY\n    compute_name\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    compute_type,\n    CASE\n      WHEN\n        percentage_of_total < (:group_percent / 100)\n        AND ISTOPN.compute_name IS NULL\n      THEN 'Other'\n      ELSE TOTALS.compute_name\n    END AS compute_name,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n      LEFT JOIN ISTOPN\n        ON TOTALS.compute_name = ISTOPN.compute_name\n  WHERE\n    :show_top_n <> 1\n    OR (\n      :show_top_n = 1\n      AND ISTOPN.compute_name IS NOT NULL\n    )\n  GROUP BY\n    usage_date,\n    workspace,\n    compute_type,\n    CASE\n      WHEN\n        percentage_of_total < (:group_percent / 100)\n        AND ISTOPN.compute_name IS NULL\n      THEN'Other'\n      ELSE TOTALS.compute_name\n    END\n)\nSELECT\n  usage_date,\n  workspace,\n  compute_type,\n  compute_name,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"5"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"0"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"48342671","displayName":"de_usage_agg_compute_si","query":"WITH DEAGG AS (\n  SELECT\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n    nn.notebook_id,\n    nn.notebook_name,\n    nn.notebook_path,\n    u.identity_metadata.run_as AS run_as,\n    u.identity_metadata.owned_by AS owned_by,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted\n  FROM\n    system.billing.usage u\n      LEFT JOIN (\n        SELECT\n          workspace_id,\n          usage_metadata.notebook_id,\n          SUBSTRING_INDEX(usage_metadata.notebook_path, '/', -1) as notebook_name,\n          usage_metadata.notebook_path,\n          ROW_NUMBER() OVER (PARTITION BY usage_metadata.notebook_id ORDER BY usage_date DESC) as rn\n        FROM\n          system.billing.usage\n      ) nn\n        ON u.workspace_id = nn.workspace_id\n        and u.usage_metadata.notebook_id = nn.notebook_id\n        and nn.rn = 1\n      LEFT JOIN system.billing.list_prices AS p\n        ON u.sku_name = p.sku_name\n        AND p.currency_code = 'USD'\n        AND u.account_id = p.account_id\n        AND u.usage_unit = p.usage_unit\n        AND u.cloud = p.cloud\n        AND (\n          u.usage_end_time BETWEEN\n            p.price_start_time\n          AND\n            COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n        )\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON u.workspace_id = wn.workspace_id\n  WHERE\n    u.usage_date BETWEEN :start_date AND :end_date\n    AND CONTAINS(u.sku_name, 'ALL_PURPOSE_SERVERLESS') = TRUE\n    AND u.usage_metadata.notebook_id IS NOT NULL\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n  GROUP BY\n    u.cloud,\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id),\n    nn.notebook_id,\n    nn.notebook_name,\n    nn.notebook_path,\n    run_as,\n    owned_by\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    notebook_id,\n    notebook_name,\n    notebook_path,\n    run_as,\n    owned_by,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n),\nISTOPN AS (\n  SELECT\n    notebook_id,\n    SUM(total_discounted) AS td\n  FROM\n    TOTALS\n  GROUP BY\n    notebook_id\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.notebook_id\n    END AS notebook_id,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE notebook_name\n    END AS notebook_name,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE notebook_path\n    END AS notebook_path,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END AS run_as,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END AS owned_by,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n      LEFT JOIN ISTOPN\n        ON TOTALS.notebook_id = ISTOPN.notebook_id\n  WHERE\n    :show_top_n <> 1\n    OR (\n      :show_top_n = 1\n      AND ISTOPN.notebook_id IS NOT NULL\n    )\n  GROUP BY\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.notebook_id\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE notebook_name\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE notebook_path\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END\n)\nSELECT\n  usage_date,\n  workspace,\n  notebook_id,\n  notebook_name,\n  notebook_path,\n  run_as,\n  owned_by,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"5"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"0"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"c84045e3","displayName":"de_usage_agg_compute_dlt","query":"WITH DEAGG AS (\n  SELECT\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n    u.usage_metadata.dlt_pipeline_id AS pipeline_id,\n    u.identity_metadata.run_as AS run_as,\n    u.identity_metadata.owned_by AS owned_by,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted\n  FROM\n    system.billing.usage u\n      LEFT JOIN system.billing.list_prices AS p\n        ON u.sku_name = p.sku_name\n        AND p.currency_code = 'USD'\n        AND u.account_id = p.account_id\n        AND u.usage_unit = p.usage_unit\n        AND u.cloud = p.cloud\n        AND (\n          u.usage_end_time BETWEEN\n            p.price_start_time\n          AND\n            COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n        )\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON u.workspace_id = wn.workspace_id\n  WHERE\n    u.usage_date BETWEEN :start_date AND :end_date\n    AND u.billing_origin_product = 'DLT'\n    AND u.usage_metadata.job_id IS NULL\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n  GROUP BY\n    u.cloud,\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id),\n    pipeline_id,\n    run_as,\n    owned_by\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    pipeline_id,\n    run_as,\n    owned_by,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n),\nISTOPN AS (\n  SELECT\n    pipeline_id,\n    SUM(total_discounted) AS td\n  FROM\n    TOTALS\n  GROUP BY\n    pipeline_id\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.pipeline_id\n    END AS pipeline_id,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END AS run_as,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END AS owned_by,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n      LEFT JOIN ISTOPN\n        ON TOTALS.pipeline_id = ISTOPN.pipeline_id\n  WHERE\n    :show_top_n <> 1\n    OR (\n      :show_top_n = 1\n      AND ISTOPN.pipeline_id IS NOT NULL\n    )\n  GROUP BY\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.pipeline_id\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END\n)\nSELECT\n  usage_date,\n  workspace,\n  pipeline_id,\n  run_as,\n  owned_by,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"5"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"0"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"8b3a9458","displayName":"de_usage_agg_compute_jobs","query":"WITH DEAGG AS (\n  select\n    u.usage_date,\n    coalesce(wn.workspace_name, u.workspace_id) as workspace,\n    coalesce(j.name, u.usage_metadata.job_id) as job,\n    u.identity_metadata.run_as as run_as,\n    u.identity_metadata.owned_by as owned_by,\n    CASE\n      WHEN CONTAINS(u.sku_name, 'JOBS_COMPUTE_(PHOTON)') THEN 'JOBS (PHOTON)'\n      WHEN u.sku_name like '%JOBS_COMPUTE' THEN 'JOBS'\n      WHEN CONTAINS(u.sku_name, 'JOBS_SERVERLESS') THEN 'JOBS (SERVERLESS)'\n      ELSE 'OTHER'\n    END AS compute_type,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted\n  from\n    system.billing.usage u\n      left join system.billing.list_prices as p\n        on u.sku_name = p.sku_name\n        and p.currency_code = 'USD'\n        and u.account_id = p.account_id\n        and u.usage_unit = p.usage_unit\n        and u.cloud = p.cloud\n        and (\n          u.usage_end_time between\n            p.price_start_time\n          and\n            coalesce(p.price_end_time, date_add(current_date, 1))\n        )\n      left join IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        on u.workspace_id = wn.workspace_id\n      LEFT JOIN (\n        SELECT\n          job_id,\n          name,\n          ROW_NUMBER() OVER (PARTITION BY job_id ORDER BY change_time DESC) as rn\n        FROM\n          system.lakeflow.jobs\n      ) j\n        ON u.usage_metadata.job_id = j.job_id\n        and j.rn = 1\n  where\n    u.usage_date between :start_date and :end_date\n    and u.billing_origin_product = 'JOBS'\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n  group by\n    u.cloud,\n    u.usage_date,\n    coalesce(wn.workspace_name, u.workspace_id),\n    coalesce(j.name, u.usage_metadata.job_id),\n    u.identity_metadata.run_as,\n    owned_by,\n    compute_type\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    job,\n    run_as,\n    owned_by,\n    compute_type,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n),\nISTOPN AS (\n  SELECT\n    job,\n    SUM(total_discounted) AS td\n  FROM\n    TOTALS\n  GROUP BY\n    job\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.job\n    END AS job,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END AS run_as,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END AS owned_by,\n    compute_type,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n      LEFT JOIN ISTOPN\n        ON TOTALS.job = ISTOPN.job\n  WHERE\n    :show_top_n <> 1\n    OR (\n      :show_top_n = 1\n      AND ISTOPN.job IS NOT NULL\n    )\n  GROUP BY\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.job\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END,\n    compute_type\n)\nSELECT\n  usage_date,\n  workspace,\n  job,\n  run_as,\n  owned_by,\n  compute_type,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"5"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"0"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"4b93687d","displayName":"de_usage_agg_compute_misc","query":"WITH DEAGG AS (\n  SELECT\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n    u.billing_origin_product,\n    u.sku_name AS compute_type,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted\n  FROM\n    system.billing.usage u\n      LEFT JOIN system.billing.list_prices AS p\n        ON u.sku_name = p.sku_name\n        AND p.currency_code = 'USD'\n        AND u.account_id = p.account_id\n        AND u.usage_unit = p.usage_unit\n        AND u.cloud = p.cloud\n        AND (\n          u.usage_end_time BETWEEN\n            p.price_start_time\n          AND\n            COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n        )\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON u.workspace_id = wn.workspace_id\n  WHERE\n    u.usage_date BETWEEN :start_date AND :end_date\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n    AND billing_origin_product not in (\n      'AGENT_EVALUATION',\n      'ALL_PURPOSE',\n      'DLT',\n      'FOUNDATION_MODEL_TRAINING',\n      'INTERACTIVE',\n      'JOBS',\n      'MODEL_SERVING',\n      'NOTEBOOKS',\n      'SQL',\n      'VECTOR_SEARCH'\n    )\n  GROUP BY\n    u.cloud,\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id),\n    u.billing_origin_product,\n    compute_type\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    billing_origin_product,\n    compute_type,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    billing_origin_product,\n    compute_type,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n  GROUP BY\n    usage_date,\n    workspace,\n    billing_origin_product,\n    compute_type\n)\nSELECT\n  usage_date,\n  workspace,\n  billing_origin_product,\n  compute_type,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"2efc9a45","displayName":"de_usage_agg_compute_ml","query":"WITH DEAGG AS (\n  SELECT\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n    u.usage_metadata.endpoint_name AS endpoint_name,\n    u.usage_metadata.endpoint_id AS endpoint_id,\n    u.billing_origin_product AS product,\n    u.identity_metadata.run_as AS run_as,\n    u.identity_metadata.owned_by AS owned_by,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted\n  FROM\n    system.billing.usage u\n      LEFT JOIN system.billing.list_prices AS p\n        ON u.sku_name = p.sku_name\n        AND p.currency_code = 'USD'\n        AND u.account_id = p.account_id\n        AND u.usage_unit = p.usage_unit\n        AND u.cloud = p.cloud\n        AND (\n          u.usage_end_time BETWEEN\n            p.price_start_time\n          AND\n            COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n        )\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON u.workspace_id = wn.workspace_id\n  WHERE\n    u.usage_date BETWEEN :start_date AND :end_date\n    AND (\n      CONTAINS(u.sku_name, 'MODEL') = TRUE\n      OR CONTAINS(u.sku_name, 'REAL_TIME') = TRUE\n    )\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n  GROUP BY\n    u.cloud,\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id),\n    endpoint_name,\n    endpoint_id,\n    u.billing_origin_product,\n    run_as,\n    owned_by\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    endpoint_name,\n    endpoint_id,\n    product,\n    run_as,\n    owned_by,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n),\nISTOPN AS (\n  SELECT\n    endpoint_id,\n    SUM(total_discounted) AS td\n  FROM\n    TOTALS\n  GROUP BY\n    endpoint_id\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.endpoint_id\n    END AS endpoint_id,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE endpoint_name\n    END AS endpoint_name,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END AS run_as,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END AS owned_by,\n    product,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n      LEFT JOIN ISTOPN\n        ON TOTALS.endpoint_id = ISTOPN.endpoint_id\n  WHERE\n    :show_top_n <> 1\n    OR (\n      :show_top_n = 1\n      AND ISTOPN.endpoint_id IS NOT NULL\n    )\n  GROUP BY\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.endpoint_id\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE endpoint_name\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE run_as\n    END,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE owned_by\n    END,\n    product\n)\nSELECT\n  usage_date,\n  workspace,\n  endpoint_id,\n  endpoint_name,\n  product,\n  run_as,\n  owned_by,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"5"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"0"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"b75fec9c","displayName":"de_usage_agg_user","query":"WITH DEAGG AS (\n  SELECT\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id) AS workspace,\n    coalesce(u.identity_metadata.run_as, u.identity_metadata.owned_by) AS user_name,\n    u.billing_origin_product AS product,\n    CASE\n      WHEN lower(u.cloud) = 'aws'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n      WHEN lower(u.cloud) = 'azure'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n      WHEN lower(u.cloud) = 'gcp'\n      THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n      ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n    END as Total_Discounted,\n    CASE\n      WHEN\n        u.billing_origin_product in (\n          'AGENT_EVALUATION',\n          'DLT',\n          'FINE_GRAINED_ACCESS_CONTROL',\n          'FOUNDATION_MODEL_TRAINING',\n          'INTERACTIVE',\n          'JOBS',\n          'LAKEFLOW_CONNECT',\n          'LAKEHOUSE_MONITORING',\n          'NOTEBOOKS'\n        )\n      THEN 'No'\n      WHEN billing_origin_product = 'SQL'\n        AND u.usage_metadata.dlt_pipeline_id is not null\n      THEN 'No'\n      WHEN billing_origin_product = 'SQL'\n        AND u.usage_metadata.dlt_pipeline_id is null\n      THEN 'Yes'\n      ELSE 'Unknown'\n    END AS shared_compute\n  FROM\n    system.billing.usage u\n      LEFT JOIN system.billing.list_prices AS p\n        ON u.sku_name = p.sku_name\n        AND p.currency_code = 'USD'\n        AND u.account_id = p.account_id\n        AND u.usage_unit = p.usage_unit\n        AND u.cloud = p.cloud\n        AND (\n          u.usage_end_time BETWEEN\n            p.price_start_time\n          AND\n            COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n        )\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON u.workspace_id = wn.workspace_id\n  WHERE\n    u.usage_date BETWEEN :start_date AND :end_date\n    AND coalesce(u.identity_metadata.run_as, u.identity_metadata.owned_by) is not null\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n    )\n  GROUP BY\n    u.cloud,\n    u.usage_date,\n    COALESCE(wn.workspace_name, u.workspace_id),\n    user_name,\n    product,\n    shared_compute\n),\nTOTALS AS (\n  SELECT\n    usage_date,\n    workspace,\n    user_name,\n    product,\n    shared_compute,\n    total_discounted,\n    total_discounted / SUM(total_discounted) OVER (PARTITION BY usage_date) AS percentage_of_total\n  FROM\n    DEAGG\n),\nISTOPN AS (\n  SELECT\n    user_name,\n    SUM(total_discounted) AS td\n  FROM\n    TOTALS\n  GROUP BY\n    user_name\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n),\nGROUPED AS (\n  SELECT\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.user_name\n    END AS user_name,\n    product,\n    shared_compute,\n    SUM(total_discounted) AS total_discounted\n  FROM\n    TOTALS\n      LEFT JOIN ISTOPN\n        ON TOTALS.user_name = ISTOPN.user_name\n  WHERE\n    :show_top_n <> 1\n    OR (\n      :show_top_n = 1\n      AND ISTOPN.user_name IS NOT NULL\n    )\n  GROUP BY\n    usage_date,\n    workspace,\n    CASE\n      WHEN percentage_of_total < (:group_percent / 100) THEN 'Other'\n      ELSE TOTALS.user_name\n    END,\n    product,\n    shared_compute\n)\nSELECT\n  usage_date,\n  workspace,\n  user_name,\n  product,\n  shared_compute,\n  total_discounted\nFROM\n  GROUPED\nORDER BY\n  total_discounted DESC;","parameters":[{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"5"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"0"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"f5f16814","displayName":"de_usage_agg_user_detail","query":"select\n  coalesce(u.identity_metadata.run_as, u.identity_metadata.owned_by) as user_name,\n  u.usage_date,\n  CASE\n    WHEN lower(u.cloud) = 'aws'\n    THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :aws_discount) / 100)\n    WHEN lower(u.cloud) = 'azure'\n    THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :azure_discount) / 100)\n    WHEN lower(u.cloud) = 'gcp'\n    THEN sum(p.pricing.effective_list.default * u.usage_quantity) * ((100 - :gcp_discount) / 100)\n    ELSE sum(p.pricing.effective_list.default * u.usage_quantity)\n  END as Total_Discounted,\n  u.billing_origin_product as product,\n  CASE\n    WHEN\n      u.billing_origin_product in (\n        'AGENT_EVALUATION',\n        'DLT',\n        'FINE_GRAINED_ACCESS_CONTROL',\n        'FOUNDATION_MODEL_TRAINING',\n        'INTERACTIVE',\n        'JOBS',\n        'LAKEFLOW_CONNECT',\n        'LAKEHOUSE_MONITORING',\n        'NOTEBOOKS'\n      )\n    THEN 'No'\n    WHEN billing_origin_product = 'SQL'\n      AND u.usage_metadata.dlt_pipeline_id is not null\n    THEN 'No'\n    WHEN billing_origin_product = 'SQL'\n      AND u.usage_metadata.dlt_pipeline_id is null\n    THEN 'Yes'\n    ELSE 'Unknown'\n  END AS shared_compute,\n  u.usage_metadata.*\nFROM\n  system.billing.usage u\n    LEFT JOIN system.compute.clusters c\n      ON u.workspace_id = c.workspace_id\n      AND u.usage_metadata.cluster_id = c.cluster_id\n    LEFT JOIN system.compute.warehouses w\n      ON u.workspace_id = w.workspace_id\n      AND u.usage_metadata.warehouse_id = w.warehouse_id\n    LEFT JOIN system.billing.list_prices AS p\n      ON u.sku_name = p.sku_name\n      AND p.currency_code = 'USD'\n      AND u.account_id = p.account_id\n      AND u.usage_unit = p.usage_unit\n      AND u.cloud = p.cloud\n      AND (\n        u.usage_end_time BETWEEN\n          p.price_start_time\n        AND\n          COALESCE(p.price_end_time, DATE_ADD(CURRENT_DATE, 1))\n      )\n    LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n      ON u.workspace_id = wn.workspace_id\nWHERE\n  u.usage_date BETWEEN :start_date AND :end_date\n  AND coalesce(u.identity_metadata.run_as, u.identity_metadata.owned_by) is not null\n  AND IF(\n    :workspace = '<ALL WORKSPACES>', TRUE, COALESCE(wn.workspace_name, u.workspace_id) = :workspace\n  )\nGROUP BY\n  user_name,\n  u.usage_date,\n  u.cloud,\n  product,\n  shared_compute,\n  u.usage_metadata.cluster_id,\n  u.usage_metadata.job_id,\n  u.usage_metadata.warehouse_id,\n  u.usage_metadata.instance_pool_id,\n  u.usage_metadata.node_type,\n  u.usage_metadata.job_run_id,\n  u.usage_metadata.notebook_id,\n  u.usage_metadata.dlt_pipeline_id,\n  u.usage_metadata.endpoint_name,\n  u.usage_metadata.endpoint_id,\n  u.usage_metadata.dlt_update_id,\n  u.usage_metadata.dlt_maintenance_id,\n  u.usage_metadata.run_name,\n  u.usage_metadata.job_name,\n  u.usage_metadata.notebook_path,\n  u.usage_metadata.central_clean_room_id,\n  u.usage_metadata.source_region,\n  u.usage_metadata.destination_region,\n  u.usage_metadata.app_id,\n  u.usage_metadata.app_name,\n  u.usage_metadata.metastore_id,\n  u.usage_metadata.private_endpoint_name,\n  u.usage_metadata.storage_api_type,\n  u.usage_metadata.budget_policy_id\nORDER BY\n  user_name,\n  usage_date,\n  product","parameters":[{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"aws_discount","keyword":"aws_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"azure_discount","keyword":"azure_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},{"displayName":"gcp_discount","keyword":"gcp_discount","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}}]},{"name":"866f47b2","displayName":"de_usage_agg_query","query":"WITH DEAGG AS (\n  SELECT\n    COALESCE(wn.workspace_name, h.workspace_id) AS workspace,\n    h.statement_id,\n    h.executed_by,\n    h.executed_as,\n    h.session_id,\n    h.execution_status,\n    h.compute.type as compute_type,\n    coalesce(h.compute.cluster_id, h.compute.warehouse_id) as compute_id,\n    coalesce(c.cluster_name, w.warehouse_name) as compute_name,\n    h.statement_text,\n    h.statement_type,\n    h.error_message,\n    coalesce(h.client_application, h.client_driver) AS client_application,\n    h.client_driver,\n    h.total_duration_ms,\n    h.waiting_for_compute_duration_ms,\n    h.waiting_at_capacity_duration_ms,\n    h.execution_duration_ms,\n    h.compilation_duration_ms,\n    h.total_task_duration_ms,\n    h.result_fetch_duration_ms,\n    h.start_time,\n    h.end_time,\n    h.update_time,\n    h.read_partitions,\n    h.pruned_files,\n    h.read_files,\n    h.read_rows,\n    h.produced_rows,\n    h.read_bytes,\n    h.read_io_cache_percent,\n    h.from_result_cache,\n    h.spilled_local_bytes,\n    h.written_bytes,\n    h.shuffle_read_bytes,\n    h.query_source.*\n  FROM\n    system.query.history h\n      LEFT JOIN system.compute.clusters c\n        ON h.workspace_id = c.workspace_id\n        AND h.compute.cluster_id = c.cluster_id\n      LEFT JOIN system.compute.warehouses w\n        ON h.workspace_id = w.workspace_id\n        AND h.compute.warehouse_id = w.warehouse_id\n      LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON h.workspace_id = wn.workspace_id\n  WHERE\n    h.end_time BETWEEN :start_date AND :end_date\n    AND IF(\n      :workspace = '<ALL WORKSPACES>',\n      TRUE,\n      COALESCE(wn.workspace_name, h.workspace_id) = :workspace\n    )\n    AND IF(:exec_by = '<ALL USERS>', TRUE, h.executed_by = :exec_by)\n    AND IF(:comp_type = '<ALL COMPUTE TYPES>', TRUE, h.executed_by = :comp_type)\n    AND IF(\n      :comp_name = '<ALL COMPUTE CLUSTERS>',\n      TRUE,\n      coalesce(c.cluster_name, w.warehouse_name) = :comp_name\n    )\n    AND IF(:q_type = '<ALL QUERY TYPES>', TRUE, h.statement_type = :q_type)\n    AND IF(:exec_stat = '<ALL STATUSES>', TRUE, h.execution_status = :exec_stat)\n    AND IF(\n      :client_app = '<ALL CLIENT APPS>',\n      TRUE,\n      coalesce(h.client_application, h.client_driver) = :client_app\n    )\n  GROUP BY\n    ALL\n),\nTOTALS AS (\n  SELECT\n    workspace,\n    statement_id,\n    executed_by,\n    executed_as,\n    session_id,\n    execution_status,\n    compute_type,\n    compute_id,\n    compute_name,\n    statement_text,\n    statement_type,\n    error_message,\n    client_application,\n    client_driver,\n    total_duration_ms,\n    waiting_for_compute_duration_ms,\n    waiting_at_capacity_duration_ms,\n    execution_duration_ms,\n    compilation_duration_ms,\n    total_task_duration_ms,\n    result_fetch_duration_ms,\n    start_time,\n    end_time,\n    update_time,\n    read_partitions,\n    pruned_files,\n    read_files,\n    read_rows,\n    produced_rows,\n    read_bytes,\n    read_io_cache_percent,\n    from_result_cache,\n    spilled_local_bytes,\n    written_bytes,\n    shuffle_read_bytes,\n    job_info,\n    legacy_dashboard_id,\n    dashboard_id,\n    alert_id,\n    notebook_id,\n    sql_query_id,\n    genie_space_id,\n    total_duration_ms\n    / SUM(total_duration_ms) OVER (PARTITION BY DATE(end_time)) AS percentage_of_total\n  FROM\n    DEAGG\n),\nISTOPN AS (\n  SELECT\n    statement_id,\n    total_duration_ms AS td\n  FROM\n    TOTALS\n  ORDER BY\n    td DESC\n  LIMIT :top_n\n)\nSELECT\n  workspace,\n  CASE\n    WHEN\n      percentage_of_total < (:group_percent / 100)\n      AND ISTOPN.statement_id IS NULL\n    THEN\n      'Other'\n    ELSE TOTALS.statement_id\n  END AS statement_id,\n  executed_by,\n  executed_as,\n  session_id,\n  execution_status,\n  compute_type,\n  compute_id,\n  compute_name,\n  statement_text,\n  statement_type,\n  error_message,\n  CASE\n    WHEN CONTAINS(client_application, 'JDBC') THEN 'JDBC'\n    WHEN CONTAINS(client_application, 'ODBC') THEN 'ODBC'\n    WHEN CONTAINS(client_application, 'SqlExecApi') THEN 'SQL API'\n    WHEN CONTAINS(client_application, 'GoDatabricks') THEN 'SQL Connector for Go'\n    WHEN CONTAINS(client_application, 'Nodejs') THEN 'SQL Connector for Node js'\n    WHEN CONTAINS(client_application, 'PyDatabricks') THEN 'SQL Connector for Python'\n    WHEN CONTAINS(client_application, 'PyDatabricks') THEN 'SQL Connector for Python'\n    ELSE client_application\n  END AS client_application,\n  client_driver,\n  total_duration_ms,\n  waiting_for_compute_duration_ms,\n  waiting_at_capacity_duration_ms,\n  execution_duration_ms,\n  compilation_duration_ms,\n  total_task_duration_ms,\n  result_fetch_duration_ms,\n  start_time,\n  end_time,\n  update_time,\n  read_partitions,\n  pruned_files,\n  read_files,\n  read_rows,\n  produced_rows,\n  read_bytes,\n  read_io_cache_percent,\n  from_result_cache,\n  spilled_local_bytes,\n  written_bytes,\n  shuffle_read_bytes,\n  job_info,\n  legacy_dashboard_id,\n  dashboard_id,\n  alert_id,\n  notebook_id,\n  sql_query_id,\n  genie_space_id\nFROM\n  TOTALS\n    LEFT JOIN ISTOPN\n      ON TOTALS.statement_id = ISTOPN.statement_id\nWHERE\n  :show_top_n <> 1\n  OR (\n    :show_top_n = 1\n    AND ISTOPN.statement_id IS NOT NULL\n  )\nGROUP BY\n  ALL\nORDER BY\n  total_duration_ms DESC;","parameters":[{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"lookup"}]}}},{"displayName":"Start Date","keyword":"start_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-30d/d"}]}}},{"displayName":"End Date","keyword":"end_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"workspace","keyword":"workspace","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL WORKSPACES>"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"20"}]}}},{"displayName":"group_percent","keyword":"group_percent","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"5"}]}}},{"displayName":"show_top_n","keyword":"show_top_n","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"0"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}},{"displayName":"exec_by","keyword":"exec_by","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL USERS>"}]}}},{"displayName":"comp_type","keyword":"comp_type","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL COMPUTE TYPES>"}]}}},{"displayName":"comp_name","keyword":"comp_name","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL COMPUTE CLUSTERS>"}]}}},{"displayName":"q_type","keyword":"q_type","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL QUERY TYPES>"}]}}},{"displayName":"exec_stat","keyword":"exec_stat","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL STATUSES>"}]}}},{"displayName":"client_app","keyword":"client_app","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"<ALL CLIENT APPS>"}]}}}]},{"name":"dcf603a6","displayName":"u_query_client_app","query":"SELECT\n    distinct\n    CASE\n      WHEN h.client_application is not null THEN h.client_application\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'JDBC') THEN 'JDBC'\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'ODBC') THEN 'ODBC'\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'SqlExecApi') THEN 'SQL API'\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'GoDatabricks') THEN 'SQL Connector for Go'\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'Nodejs') THEN 'SQL Connector for Node js'\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'PyDatabricks') THEN 'SQL Connector for Python'\n      WHEN h.client_application is null AND CONTAINS(h.client_driver,'PyDatabricks') THEN 'SQL Connector for Python'\n      ELSE h.client_application\n    END AS client_app    \n  FROM\n    system.query.history h\norder by client_app"},{"name":"30b14b54","displayName":"u_query_comp","query":"SELECT\n    distinct coalesce(c.cluster_name, w.warehouse_name) as compute_name \nFROM system.query.history h\n    LEFT JOIN system.compute.clusters c ON h.workspace_id = c.workspace_id \n        AND h.compute.cluster_id = c.cluster_id\n    LEFT JOIN system.compute.warehouses w ON h.workspace_id = w.workspace_id \n        AND h.compute.warehouse_id = w.warehouse_id\nORDER BY compute_name"},{"name":"376b0e28","displayName":"u_query_comp_type","query":"select distinct h.compute.type as compute_type\nfrom system.query.history h\norder by compute_type"},{"name":"7179bfa4","displayName":"u_query_exec_stat","query":"select distinct h.execution_status\nfrom system.query.history h\norder by h.execution_status"},{"name":"c6b8391b","displayName":"u_query_q_type","query":"select distinct h.statement_type\nfrom system.query.history h\norder by h.statement_type"},{"name":"c0a7a4fa","displayName":"u_query_user","query":"select distinct h.executed_by\nfrom system.query.history h\norder by h.executed_by"},{"name":"7e20f9b4","displayName":"u_workspace_names","query":"WITH WSID AS (\n  select distinct\n    workspace_id\n  from\n    system.billing.usage\n  UNION\n  select distinct\n    workspace_id\n  from\n    IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) \n)\nselect\n  coalesce(wn.workspace_name, wsid.workspace_id) as workspace\nfrom\n  wsid\n    LEFT JOIN IDENTIFIER(:wn_catalog || '.' || :wn_schema || '.' || :wn_table) wn\n        ON wsid.workspace_id = wn.workspace_id\norder by\n  wsid.workspace_id","parameters":[{"displayName":"wn_catalog","keyword":"wn_catalog","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"dbdemos"}]}}},{"displayName":"wn_schema","keyword":"wn_schema","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"artm_test"}]}}},{"displayName":"wn_table","keyword":"wn_table","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"workspace_names"}]}}}]}],"pages":[{"name":"0e7485b2","displayName":"Executive Summary","layout":[{"widget":{"name":"e66ddc0e","queries":[{"name":"main_query","query":{"datasetName":"7c7ab2c7","fields":[{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"},{"name":"sum(total_discounted_forecast)","expression":"SUM(`total_discounted_forecast`)"},{"name":"avg(commit)","expression":"AVG(`commit`)"},{"name":"avg(Running_Total)","expression":"AVG(`Running_Total`)"}],"disaggregated":false}}],"spec":{"version":1,"widgetType":"combo","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"categorical"},"axis":{"title":"Month"},"displayName":"Month"},"y":{"primary":{"fields":[{"fieldName":"sum(total_discounted)","displayName":"Discounted Actuals"},{"fieldName":"sum(total_discounted_forecast)","displayName":"Discounted Forecast"}]},"secondary":{"fields":[{"fieldName":"avg(commit)","displayName":"Contract Commit"},{"fieldName":"avg(Running_Total)","displayName":"Cumulative"}]},"scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"axis":{"title":"$ Usage"}}},"mark":{"colors":["#077A9D","#ded02c","#719ce1","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":10,"width":6,"height":9}},{"widget":{"name":"14c64967","queries":[{"name":"main_query","query":{"datasetName":"0037dc6d","fields":[{"name":"billing_origin_product","expression":"`billing_origin_product`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(Total_Discounted)","expression":"SUM(`Total_Discounted`)"}],"parameterValues":[{"keyword":"start_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now-12M/M"}]}}},{"keyword":"end_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"categorical"},"axis":{"title":"Month"},"displayName":"Month"},"y":{"fieldName":"sum(Total_Discounted)","scale":{"type":"quantitative"},"axis":{"title":"$ Usage"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$ Usage"},"color":{"fieldName":"billing_origin_product","scale":{"type":"categorical"},"displayName":"Workload Type"}}}},"position":{"x":0,"y":20,"width":3,"height":6}},{"widget":{"name":"62867da0","textbox_spec":"## Contract Burndown\n#### Discounted Forecast provided by basic AI function and does not account for known future factors that will impact usage"},"position":{"x":0,"y":8,"width":6,"height":2}},{"widget":{"name":"cf997ad9","textbox_spec":"## By Workload Type - Last 12 Months"},"position":{"x":0,"y":19,"width":3,"height":1}},{"widget":{"name":"dc59cb72","textbox_spec":"## By Workload Type - Last 7 Days"},"position":{"x":3,"y":19,"width":3,"height":1}},{"widget":{"name":"a93d7bf0","textbox_spec":"## By Workspace - Last 12 Months"},"position":{"x":0,"y":26,"width":6,"height":1}},{"widget":{"name":"7d2e13dd","queries":[{"name":"main_query","query":{"datasetName":"0037dc6d","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(Total_Discounted)","expression":"SUM(`Total_Discounted`)"}],"parameterValues":[{"keyword":"start_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now-12M/M"}]}}},{"keyword":"end_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}}],"cubeGroupingSets":{"sets":[{"fieldNames":["workspace"]},{"fieldNames":["monthly(usage_date)"]}]},"disaggregated":false,"orders":[{"direction":"ASC","expression":"`workspace`"},{"direction":"ASC","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"}]}}],"spec":{"version":3,"widgetType":"pivot","encodings":{"rows":[{"fieldName":"workspace","displayTotal":true,"scale":{"type":"categorical","sort":{"by":"cell-reversed","field":{"index":0}}},"displayName":"Workspace"}],"columns":[{"fieldName":"monthly(usage_date)","displayTotal":true,"displayName":"Month"}],"cell":{"type":"multi-cell","fields":[{"fieldName":"sum(Total_Discounted)","cellType":"text","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"exact","places":2},"hideGroupSeparator":true},"style":{"type":"color-scale","backgroundColor":{"scale":{"type":"quantitative"}}},"contentAlignment":"center","displayName":"$ Usage by WS"}]}},"frame":{"showDescription":false,"showTitle":false}}},"position":{"x":0,"y":27,"width":6,"height":6}},{"widget":{"name":"dfc6ad0e","queries":[{"name":"main_query","query":{"datasetName":"0037dc6d","fields":[{"name":"billing_origin_product","expression":"`billing_origin_product`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(Total_Discounted)","expression":"SUM(`Total_Discounted`)"}],"parameterValues":[{"keyword":"start_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now-7d/d"}]}}},{"keyword":"end_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"categorical"},"axis":{"title":"Month"},"displayName":"Month"},"y":{"fieldName":"sum(Total_Discounted)","scale":{"type":"quantitative"},"axis":{"title":"$ Usage"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$ Usage"},"color":{"fieldName":"billing_origin_product","scale":{"type":"categorical"},"displayName":"Workload Type"}}}},"position":{"x":3,"y":20,"width":3,"height":6}},{"widget":{"name":"93819f38","queries":[{"name":"main_query","query":{"datasetName":"0037dc6d","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"billing_origin_product","expression":"`billing_origin_product`"},{"name":"sum(Total_Discounted)","expression":"SUM(`Total_Discounted`)"}],"parameterValues":[{"keyword":"start_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now-30d/d"}]}}},{"keyword":"end_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}}],"cubeGroupingSets":{"sets":[{"fieldNames":["workspace"]},{"fieldNames":["billing_origin_product"]}]},"disaggregated":false,"orders":[{"direction":"ASC","expression":"`workspace`"},{"direction":"ASC","expression":"`billing_origin_product`"}]}}],"spec":{"version":3,"widgetType":"pivot","encodings":{"rows":[{"fieldName":"workspace","scale":{"type":"categorical","sort":{"by":"cell-reversed","field":{"index":0}}},"displayName":"Workspace"}],"columns":[{"fieldName":"billing_origin_product","displayTotal":true,"displayName":"Workload Type"}],"cell":{"type":"multi-cell","fields":[{"fieldName":"sum(Total_Discounted)","cellType":"text","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"exact","places":2},"hideGroupSeparator":true},"style":{"type":"color-scale","backgroundColor":{"scale":{"type":"quantitative","colorRamp":{"mode":"scheme","scheme":"blues"}}}},"contentAlignment":"center","displayName":"$ Usage by Workspace / Workload Type"}]}},"frame":{"showDescription":false,"showTitle":false}}},"position":{"x":0,"y":41,"width":6,"height":6}},{"widget":{"name":"b96b5161","textbox_spec":"## By Workspace/Workload - Last 30 Days"},"position":{"x":0,"y":40,"width":6,"height":1}},{"widget":{"name":"9814727a","queries":[{"name":"main_query","query":{"datasetName":"0037dc6d","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(Total_Discounted)","expression":"SUM(`Total_Discounted`)"}],"parameterValues":[{"keyword":"start_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now-7d/d"}]}}},{"keyword":"end_date","selection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}}],"cubeGroupingSets":{"sets":[{"fieldNames":["workspace"]},{"fieldNames":["daily(usage_date)"]}]},"disaggregated":false,"orders":[{"direction":"ASC","expression":"`workspace`"},{"direction":"ASC","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"}]}}],"spec":{"version":3,"widgetType":"pivot","encodings":{"rows":[{"fieldName":"workspace","displayTotal":false,"scale":{"type":"categorical","sort":{"by":"cell-reversed","field":{"index":0}}},"displayName":"Workspace"}],"columns":[{"fieldName":"daily(usage_date)","displayTotal":true,"displayName":"Month"}],"cell":{"type":"multi-cell","fields":[{"fieldName":"sum(Total_Discounted)","cellType":"text","format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"exact","places":2},"hideGroupSeparator":true},"style":{"type":"color-scale","backgroundColor":{"scale":{"type":"quantitative"}}},"contentAlignment":"center","displayName":"$ Usage by WS"}]}},"frame":{"showDescription":false,"showTitle":false}}},"position":{"x":0,"y":34,"width":6,"height":6}},{"widget":{"name":"27e85f86","textbox_spec":"## By Workspace - Last 7 Days"},"position":{"x":0,"y":33,"width":6,"height":1}},{"widget":{"name":"691bf5d1","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_start_date","query":{"datasetName":"7c7ab2c7","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_start_date"}]},"frame":{"showTitle":true,"title":"Contract Start"},"selection":{"defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"2025-01-31T00:00:00.000"}]}}}}},"position":{"x":0,"y":6,"width":1,"height":2}},{"widget":{"name":"09e8a249","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_end_date","query":{"datasetName":"7c7ab2c7","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_end_date"}]},"selection":{"defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"2026-01-30T00:00:00.000"}]}}},"frame":{"showTitle":true,"title":"Contract End"}}},"position":{"x":1,"y":6,"width":1,"height":2}},{"widget":{"name":"35999a92","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_commit","query":{"datasetName":"7c7ab2c7","parameters":[{"name":"commit","keyword":"commit"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"commit","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_commit"}]},"frame":{"showTitle":true,"title":"Contract Commit"},"selection":{"defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"1000000"}]}}}}},"position":{"x":2,"y":6,"width":1,"height":2}},{"widget":{"name":"0b898181","textbox_spec":"# Detailed Usage Dashboard\n#### This dashboard only shows data for all workspaces of the current Databricks account/cloud"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"003e50af","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_azure_discount","query":{"datasetName":"7c7ab2c7","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba4107f80e02b41e2624def_azure_discount","query":{"datasetName":"0037dc6d","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_azure_discount","query":{"datasetName":"59f9671b","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_azure_discount","query":{"datasetName":"48342671","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_azure_discount","query":{"datasetName":"c84045e3","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_azure_discount","query":{"datasetName":"8b3a9458","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_azure_discount","query":{"datasetName":"4b93687d","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_azure_discount","query":{"datasetName":"2efc9a45","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_azure_discount","query":{"datasetName":"b75fec9c","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_azure_discount","query":{"datasetName":"f5f16814","parameters":[{"name":"azure_discount","keyword":"azure_discount"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba4107f80e02b41e2624def_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_azure_discount"},{"parameterName":"azure_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_azure_discount"}]},"selection":{"defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},"frame":{"showTitle":true,"title":"Azure Discount %","headerAlignment":"left","showDescription":false}}},"position":{"x":3,"y":6,"width":1,"height":2}},{"widget":{"name":"88da1748","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_aws_discount","query":{"datasetName":"7c7ab2c7","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba4107f80e02b41e2624def_aws_discount","query":{"datasetName":"0037dc6d","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_aws_discount","query":{"datasetName":"59f9671b","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_aws_discount","query":{"datasetName":"48342671","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_aws_discount","query":{"datasetName":"c84045e3","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_aws_discount","query":{"datasetName":"8b3a9458","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_aws_discount","query":{"datasetName":"4b93687d","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_aws_discount","query":{"datasetName":"2efc9a45","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_aws_discount","query":{"datasetName":"b75fec9c","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_aws_discount","query":{"datasetName":"f5f16814","parameters":[{"name":"aws_discount","keyword":"aws_discount"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba4107f80e02b41e2624def_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_aws_discount"},{"parameterName":"aws_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_aws_discount"}]},"selection":{"defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},"frame":{"showTitle":true,"title":"AWS Discount %","headerAlignment":"left","showDescription":false}}},"position":{"x":4,"y":6,"width":1,"height":2}},{"widget":{"name":"1fc611be","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_gcp_discount","query":{"datasetName":"7c7ab2c7","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba4107f80e02b41e2624def_gcp_discount","query":{"datasetName":"0037dc6d","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_gcp_discount","query":{"datasetName":"59f9671b","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_gcp_discount","query":{"datasetName":"48342671","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_gcp_discount","query":{"datasetName":"c84045e3","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_gcp_discount","query":{"datasetName":"8b3a9458","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_gcp_discount","query":{"datasetName":"4b93687d","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_gcp_discount","query":{"datasetName":"2efc9a45","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_gcp_discount","query":{"datasetName":"b75fec9c","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_gcp_discount","query":{"datasetName":"f5f16814","parameters":[{"name":"gcp_discount","keyword":"gcp_discount"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba41003b049fd5c36bad8c6_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5ad6ba4107f80e02b41e2624def_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_gcp_discount"},{"parameterName":"gcp_discount","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_gcp_discount"}]},"selection":{"defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"0"}]}}},"frame":{"showTitle":true,"title":"GCP Discount %","headerAlignment":"left","showDescription":false}}},"position":{"x":5,"y":6,"width":1,"height":2}},{"widget":{"name":"eb552584","textbox_spec":"## Notes    \n---\n<<<READ ME>>>\n\n- Please replace the Contract Start/End/Commit widget fields below to represent your current contract parameters\n- For the Discount widgets, you can remove that ones that do not apply to this account\n- Forecast numbers for the Contract Burndown chart are from a basic AI forecast function using simple usage trending and does not take into account any known factors in the near future that will impact usage\n   \n---"},"position":{"x":0,"y":2,"width":6,"height":4}}]},{"name":"8cef126d","displayName":"By Compute","layout":[{"widget":{"name":"f703bae6","textbox_spec":"## DLT Pipeline Compute Usage\n\nExcludes DLT pipelines ran as Jobs/Workflows"},"position":{"x":0,"y":42,"width":6,"height":2}},{"widget":{"name":"63a96de7","queries":[{"name":"main_query","query":{"datasetName":"59f9671b","fields":[{"name":"compute_type","expression":"`compute_type`"},{"name":"compute_name","expression":"`compute_name`"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"STRING","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"compute_name","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Compute Cluster"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"compute_type","scale":{"type":"categorical"},"displayName":"Compute Type"},"label":{"show":false}},"frame":{"showTitle":true,"title":"Top N by Compute Cluster"}}},"position":{"x":0,"y":10,"width":6,"height":6}},{"widget":{"name":"1cd9673d","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_start_date","query":{"datasetName":"48342671","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_start_date","query":{"datasetName":"59f9671b","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_start_date","query":{"datasetName":"c84045e3","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_start_date","query":{"datasetName":"2efc9a45","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_start_date"},{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_start_date"},{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_start_date"},{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_start_date"}]},"selection":{"defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-90d/d"}]}}},"frame":{"showTitle":true,"title":"Start Date"}}},"position":{"x":0,"y":7,"width":2,"height":1}},{"widget":{"name":"7caeab47","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_end_date","query":{"datasetName":"59f9671b","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_end_date","query":{"datasetName":"48342671","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_end_date","query":{"datasetName":"c84045e3","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_end_date","query":{"datasetName":"2efc9a45","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_end_date"},{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_end_date"},{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_end_date"},{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_end_date"}]},"selection":{"defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},"frame":{"showTitle":true,"title":"End Date"}}},"position":{"x":2,"y":7,"width":2,"height":1}},{"widget":{"name":"d2080c7c","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_top_n","query":{"datasetName":"59f9671b","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_top_n","query":{"datasetName":"48342671","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_top_n","query":{"datasetName":"c84045e3","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_top_n","query":{"datasetName":"2efc9a45","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_top_n"},{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_top_n"},{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_top_n"},{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_top_n"}]},"frame":{"showTitle":true,"title":"Top N"}}},"position":{"x":4,"y":7,"width":2,"height":1}},{"widget":{"name":"0d9f5a89","queries":[{"name":"main_query","query":{"datasetName":"48342671","fields":[{"name":"notebook_name","expression":"`notebook_name`"},{"name":"notebook_path","expression":"`notebook_path`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"notebook_id","expression":"`notebook_id`"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"INTEGER","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"notebook_id","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Notebook ID"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"extra":[{"fieldName":"notebook_name","displayName":"notebook_name"},{"fieldName":"notebook_path","displayName":"notebook_path"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"}]},"frame":{"showTitle":true,"title":"Top N by Notebook"}}},"position":{"x":0,"y":30,"width":3,"height":6}},{"widget":{"name":"7c50107d","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace","query":{"datasetName":"7e20f9b4","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"workspace_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_workspace","query":{"datasetName":"59f9671b","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_workspace","query":{"datasetName":"48342671","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_workspace","query":{"datasetName":"c84045e3","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_workspace","query":{"datasetName":"2efc9a45","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"workspace","displayName":"workspace","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_workspace"}]},"frame":{"showTitle":true,"title":"Workspace"}}},"position":{"x":0,"y":6,"width":3,"height":1}},{"widget":{"name":"d17c8810","textbox_spec":"## Notes    \n---\n<<<READ ME>>>\n\n- Compute clusters are only relevant to All Purpose and SQL compute since Serverless Notebooks, DLT, and Serverless DLT do not have persistent compute clusters, they are truly on-demand and aside from non-serverless DLT, the size of the cluster is dynamic.  This is why they are represented on separate graphs\n- All usage related to Jobs/Workflows will be shown on the 'By Job' tab and will not be included on this page\n   \n---"},"position":{"x":0,"y":2,"width":6,"height":4}},{"widget":{"name":"e0d3db3f","queries":[{"name":"main_query","query":{"datasetName":"c84045e3","fields":[{"name":"pipeline_id","expression":"`pipeline_id`"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"INTEGER","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"pipeline_id","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Pipeline ID"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"}},"frame":{"showTitle":true,"title":"Top N by Pipeline"}}},"position":{"x":0,"y":44,"width":3,"height":6}},{"widget":{"name":"5af0715e","queries":[{"name":"main_query","query":{"datasetName":"48342671","fields":[{"name":"notebook_id","expression":"`notebook_id`"},{"name":"notebook_name","expression":"`notebook_name`"},{"name":"notebook_path","expression":"`notebook_path`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"notebook_id","scale":{"type":"categorical"},"displayName":"Notebook ID"},"label":{"show":false},"extra":[{"fieldName":"notebook_name","displayName":"notebook_name"},{"fieldName":"notebook_path","displayName":"notebook_path"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"}]},"frame":{"showTitle":true,"title":"Monthly by Notebook"}}},"position":{"x":3,"y":30,"width":3,"height":6}},{"widget":{"name":"c87b2148","queries":[{"name":"main_query","query":{"datasetName":"48342671","fields":[{"name":"notebook_id","expression":"`notebook_id`"},{"name":"notebook_name","expression":"`notebook_name`"},{"name":"notebook_path","expression":"`notebook_path`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Date"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"notebook_id","scale":{"type":"categorical"},"displayName":"Notebook ID"},"extra":[{"fieldName":"notebook_name","displayName":"notebook_name"},{"fieldName":"notebook_path","displayName":"notebook_path"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"}]},"frame":{"showTitle":true,"title":"Daily by Notebook"}}},"position":{"x":0,"y":36,"width":6,"height":6}},{"widget":{"name":"88debb50","textbox_spec":"## Serverless Notebooks Compute Usage\nOnly inlcudes Serverless Notebooks (Serverless Interactive) compute usage but due to the true on-demand nature of this compute, individual notebook cost can be represented here for granular detail."},"position":{"x":0,"y":28,"width":6,"height":2}},{"widget":{"name":"f3f6c6e5","queries":[{"name":"main_query","query":{"datasetName":"59f9671b","fields":[{"name":"compute_name","expression":"`compute_name`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Total"},"color":{"fieldName":"compute_name","scale":{"type":"categorical"},"displayName":"Compute Name"},"extra":[{"fieldName":"compute_type","displayName":"compute_type"}]},"frame":{"showTitle":true,"title":"Monthly by Compute Cluster"}}},"position":{"x":0,"y":16,"width":3,"height":6}},{"widget":{"name":"9d0bc6a6","queries":[{"name":"main_query","query":{"datasetName":"59f9671b","fields":[{"name":"compute_name","expression":"`compute_name`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Date"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Total"},"color":{"fieldName":"compute_name","scale":{"type":"categorical"},"displayName":"Compute Name"}},"frame":{"showTitle":true,"title":"Daily by Compute Cluster"}}},"position":{"x":0,"y":22,"width":6,"height":6}},{"widget":{"name":"9d45b032","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_group_percent","query":{"datasetName":"59f9671b","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_group_percent","query":{"datasetName":"48342671","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_group_percent","query":{"datasetName":"c84045e3","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_group_percent","query":{"datasetName":"2efc9a45","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f5da11b7d982c31089d9ba271_group_percent"},{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef1f76da1d7791307b93ae31af8a_group_percent"},{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef2240711db5b52d3aed3cf38d99_group_percent"},{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4e566d1d3e8465eb03fd1b8336_group_percent"}]},"frame":{"showTitle":true,"title":"Grouping (%)","showDescription":true,"description":"Grouping of any items less than X percentage of Total Cost as \"Other\"","headerAlignment":"left"}}},"position":{"x":3,"y":6,"width":3,"height":1}},{"widget":{"name":"953df132","textbox_spec":"# Usage by Compute\n## Top N || Monthly || Daily "},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"54cf2c3c","textbox_spec":"## All Purpose and SQL Compute Usage by Compute Cluster\n\nOnly includes All Purpose and SQL compute, see below for Serverless Interactive and see the By Job tab for workflow compute"},"position":{"x":0,"y":8,"width":6,"height":2}},{"widget":{"name":"50192e35","queries":[{"name":"main_query","query":{"datasetName":"c84045e3","fields":[{"name":"pipeline_id","expression":"`pipeline_id`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"pipeline_id","scale":{"type":"categorical"},"displayName":"Pipeline ID"},"label":{"show":false},"extra":[{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"}]},"frame":{"showTitle":true,"title":"Monthly by Pipeline"}}},"position":{"x":3,"y":44,"width":3,"height":6}},{"widget":{"name":"b14914eb","queries":[{"name":"main_query","query":{"datasetName":"c84045e3","fields":[{"name":"pipeline_id","expression":"`pipeline_id`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Date"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"pipeline_id","scale":{"type":"categorical"},"displayName":"Pipeline ID"},"extra":[{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"}]},"frame":{"showTitle":true,"title":"Daily by Pipeline"}}},"position":{"x":0,"y":50,"width":6,"height":6}},{"widget":{"name":"4b2593b5","queries":[{"name":"main_query","query":{"datasetName":"59f9671b","fields":[{"name":"compute_type","expression":"`compute_type`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Total"},"color":{"fieldName":"compute_type","scale":{"type":"categorical"},"displayName":"Compute Type"},"extra":[{"fieldName":"compute_type","displayName":"compute_type"}]},"frame":{"showTitle":true,"title":"Monthly by Compute Cluster and Compute Type"}}},"position":{"x":3,"y":16,"width":3,"height":6}},{"widget":{"name":"aeb9376a","textbox_spec":"# ML / AI Model Training/Serving Compute Usage"},"position":{"x":0,"y":56,"width":6,"height":2}},{"widget":{"name":"cec7da80","queries":[{"name":"main_query","query":{"datasetName":"2efc9a45","fields":[{"name":"product","expression":"`product`"},{"name":"endpoint_id","expression":"`endpoint_id`"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"INTEGER","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"endpoint_id","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Pipeline ID"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"product","scale":{"type":"categorical"},"displayName":"Product"}},"frame":{"showTitle":true,"title":"Top N by Endpoint"}}},"position":{"x":0,"y":58,"width":6,"height":6}},{"widget":{"name":"80d3cb2e","queries":[{"name":"main_query","query":{"datasetName":"2efc9a45","fields":[{"name":"endpoint_name","expression":"`endpoint_name`"},{"name":"endpoint_id","expression":"`endpoint_id`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"product","expression":"`product`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"endpoint_name","scale":{"type":"categorical"},"displayName":"Endpoint Name"},"label":{"show":false},"extra":[{"fieldName":"endpoint_id","displayName":"endpoint_id"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"},{"fieldName":"product","displayName":"product"}]},"frame":{"showTitle":true,"title":"Monthly by Endpoint"}}},"position":{"x":0,"y":64,"width":3,"height":6}},{"widget":{"name":"2fd6f493","queries":[{"name":"main_query","query":{"datasetName":"2efc9a45","fields":[{"name":"endpoint_name","expression":"`endpoint_name`"},{"name":"endpoint_id","expression":"`endpoint_id`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"product","expression":"`product`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Date"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"endpoint_name","scale":{"type":"categorical"},"displayName":"Endpoint Name"},"extra":[{"fieldName":"endpoint_id","displayName":"endpoint_id"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"},{"fieldName":"product","displayName":"product"}]},"frame":{"showTitle":true,"title":"Daily by Endpoint"}}},"position":{"x":0,"y":70,"width":6,"height":6}},{"widget":{"name":"c33b1e14","queries":[{"name":"main_query","query":{"datasetName":"2efc9a45","fields":[{"name":"product","expression":"`product`"},{"name":"endpoint_name","expression":"`endpoint_name`"},{"name":"endpoint_id","expression":"`endpoint_id`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"product","scale":{"type":"categorical"},"displayName":"Product"},"label":{"show":false},"extra":[{"fieldName":"endpoint_name","displayName":"endpoint_name"},{"fieldName":"endpoint_id","displayName":"endpoint_id"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"},{"fieldName":"product","displayName":"product"}]},"frame":{"showTitle":true,"title":"Monthly by Endpoint and Product"}}},"position":{"x":3,"y":64,"width":3,"height":6}}]},{"name":"6f7e7555","displayName":"By Job","layout":[{"widget":{"name":"7a3864c6","queries":[{"name":"main_query","query":{"datasetName":"8b3a9458","fields":[{"name":"job","expression":"`job`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"STRING","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"job","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"Job"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"extra":[{"fieldName":"job","displayName":"job"},{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"}]},"frame":{"showTitle":true,"title":"Top N by Job"}}},"position":{"x":0,"y":4,"width":6,"height":6}},{"widget":{"name":"f98752e4","textbox_spec":"# Usage by Job\n## Top N || Monthly || Daily || Compute Type"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"8cb55e33","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace","query":{"datasetName":"7e20f9b4","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"workspace_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_workspace","query":{"datasetName":"8b3a9458","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"workspace","displayName":"workspace","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_workspace"}]},"frame":{"showTitle":true,"title":"Workspace"}}},"position":{"x":0,"y":2,"width":3,"height":1}},{"widget":{"name":"a6c6ae7f","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_start_date","query":{"datasetName":"8b3a9458","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_start_date"}]},"frame":{"showTitle":true,"title":"Start Date"}}},"position":{"x":0,"y":3,"width":2,"height":1}},{"widget":{"name":"b1f7e094","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_end_date","query":{"datasetName":"8b3a9458","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_end_date"}]},"frame":{"showTitle":true,"title":"End Date"}}},"position":{"x":2,"y":3,"width":2,"height":1}},{"widget":{"name":"9445019f","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_top_n","query":{"datasetName":"8b3a9458","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_top_n"}]},"frame":{"showTitle":true,"title":"Top N"}}},"position":{"x":4,"y":3,"width":2,"height":1}},{"widget":{"name":"23b2170a","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_group_percent","query":{"datasetName":"8b3a9458","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe73947831256b7c42e377a924f00_group_percent"}]},"frame":{"showTitle":true,"title":"Grouping (%)","showDescription":true,"description":"Grouping of any items less than X percentage of Total Cost as \"Other\""}}},"position":{"x":3,"y":2,"width":3,"height":1}},{"widget":{"name":"04f7e1fb","queries":[{"name":"main_query","query":{"datasetName":"8b3a9458","fields":[{"name":"job","expression":"`job`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"job","scale":{"type":"categorical"},"displayName":"job"},"extra":[{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"},{"fieldName":"compute_type","displayName":"compute_type"}]},"frame":{"showTitle":true,"title":"Monthly by Job"}}},"position":{"x":0,"y":10,"width":3,"height":6}},{"widget":{"name":"6aeb14e6","queries":[{"name":"main_query","query":{"datasetName":"8b3a9458","fields":[{"name":"job","expression":"`job`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"job","scale":{"type":"categorical"},"displayName":"Job"},"extra":[{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"},{"fieldName":"compute_type","displayName":"compute_type"}]},"frame":{"showTitle":true,"title":"Daily by Job"}}},"position":{"x":0,"y":16,"width":6,"height":6}},{"widget":{"name":"7b7cfdff","queries":[{"name":"main_query","query":{"datasetName":"8b3a9458","fields":[{"name":"compute_type","expression":"`compute_type`"},{"name":"owned_by","expression":"`owned_by`"},{"name":"run_as","expression":"`run_as`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"compute_type","scale":{"type":"categorical"},"displayName":"compute_type"},"extra":[{"fieldName":"owned_by","displayName":"owned_by"},{"fieldName":"run_as","displayName":"run_as"},{"fieldName":"compute_type","displayName":"compute_type"}]},"frame":{"showTitle":true,"title":"Monthly by Job and Compute Type"}}},"position":{"x":3,"y":10,"width":3,"height":6}}]},{"name":"5167a333","displayName":"By User","layout":[{"widget":{"name":"d3996e16","queries":[{"name":"main_query","query":{"datasetName":"b75fec9c","fields":[{"name":"user_name","expression":"`user_name`"},{"name":"product","expression":"`product`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"user_name","scale":{"type":"categorical"},"displayName":"User"},"extra":[{"fieldName":"product","displayName":"product"}]},"frame":{"showTitle":true,"title":"Monthly by User"}}},"position":{"x":0,"y":15,"width":3,"height":6}},{"widget":{"name":"3a80196e","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_start_date","query":{"datasetName":"b75fec9c","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_start_date","query":{"datasetName":"f5f16814","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_start_date"},{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_start_date"}]},"frame":{"showTitle":true,"title":"Start Date"}}},"position":{"x":0,"y":7,"width":2,"height":1}},{"widget":{"name":"fafb96cc","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_end_date","query":{"datasetName":"b75fec9c","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_end_date","query":{"datasetName":"f5f16814","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_end_date"},{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_end_date"}]},"frame":{"showTitle":true,"title":"End Date"}}},"position":{"x":2,"y":7,"width":2,"height":1}},{"widget":{"name":"8ff7fb95","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace","query":{"datasetName":"7e20f9b4","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"workspace_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_workspace","query":{"datasetName":"b75fec9c","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_workspace","query":{"datasetName":"f5f16814","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"workspace","displayName":"workspace","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_workspace"}]},"frame":{"showTitle":true}}},"position":{"x":0,"y":6,"width":3,"height":1}},{"widget":{"name":"1831d221","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_top_n","query":{"datasetName":"b75fec9c","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_top_n"}]},"frame":{"showTitle":true,"title":"Top N"}}},"position":{"x":4,"y":7,"width":2,"height":1}},{"widget":{"name":"8cba3a53","queries":[{"name":"main_query","query":{"datasetName":"b75fec9c","fields":[{"name":"product","expression":"`product`"},{"name":"user_name","expression":"`user_name`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"product","scale":{"type":"categorical"},"displayName":"Product"},"extra":[{"fieldName":"user_name","displayName":"user_name"}]},"frame":{"showTitle":true,"title":"Monthly by User and Product"}}},"position":{"x":3,"y":15,"width":3,"height":6}},{"widget":{"name":"960a1e2e","queries":[{"name":"main_query","query":{"datasetName":"b75fec9c","fields":[{"name":"user_name","expression":"`user_name`"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"INTEGER","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"user_name","scale":{"type":"categorical","sort":{"by":"y-reversed"}},"displayName":"User"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"extra":[{"fieldName":"user_name","displayName":"user_name"}]},"frame":{"showTitle":true,"title":"Monthly by User"}}},"position":{"x":0,"y":9,"width":6,"height":6}},{"widget":{"name":"2272a983","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_group_percent","query":{"datasetName":"b75fec9c","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_group_percent"}]},"frame":{"showTitle":true,"title":"Grouping (%)","showDescription":true,"description":"Grouping of any items less than X percentage of Total Cost as \"Other\""}}},"position":{"x":0,"y":8,"width":3,"height":1}},{"widget":{"name":"af98409d","textbox_spec":"# Usage by User\n## Top N || Monthly || Daily || Product"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"49323968","queries":[{"name":"main_query","query":{"datasetName":"b75fec9c","fields":[{"name":"user_name","expression":"`user_name`"},{"name":"product","expression":"`product`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"user_name","scale":{"type":"categorical"},"displayName":"User"},"extra":[{"fieldName":"product","displayName":"product"}]},"frame":{"showTitle":true,"title":"Daily by User"}}},"position":{"x":0,"y":21,"width":6,"height":6}},{"widget":{"name":"326e3af5","textbox_spec":"## Notes\n---  \n<<<READ ME>>>   \n\n- This dashboard does ***not*** reflect with 100% certainty that the workloads shown below truly belong to the respective user but are a best estimation of attribution, this is due to some workloads being on shared compute clusters. For this reason a \"Shared Compute\" filter has been added below to provide the option of not showing shared compute resources.\n- All purpose compute (non-serverless) is not represented here at all\n- The \"Grouping %\" and \"Top N\" filters do not impact the bottom list\n- If you're looking at a particular user, you may want to set the \"Grouping %\" to 0 to ensure you are seeing all of the workloads for the individual\n\n---"},"position":{"x":0,"y":2,"width":6,"height":4}},{"widget":{"name":"f750c33d","queries":[{"name":"main_query","query":{"datasetName":"f5f16814","fields":[{"name":"user_name","expression":"`user_name`"},{"name":"usage_date","expression":"`usage_date`"},{"name":"Total_Discounted","expression":"`Total_Discounted`"},{"name":"product","expression":"`product`"},{"name":"cluster_id","expression":"`cluster_id`"},{"name":"shared_compute","expression":"`shared_compute`"},{"name":"job_id","expression":"`job_id`"},{"name":"warehouse_id","expression":"`warehouse_id`"},{"name":"instance_pool_id","expression":"`instance_pool_id`"},{"name":"node_type","expression":"`node_type`"},{"name":"job_run_id","expression":"`job_run_id`"},{"name":"notebook_id","expression":"`notebook_id`"},{"name":"dlt_pipeline_id","expression":"`dlt_pipeline_id`"},{"name":"endpoint_name","expression":"`endpoint_name`"},{"name":"endpoint_id","expression":"`endpoint_id`"},{"name":"dlt_update_id","expression":"`dlt_update_id`"},{"name":"dlt_maintenance_id","expression":"`dlt_maintenance_id`"},{"name":"run_name","expression":"`run_name`"},{"name":"job_name","expression":"`job_name`"},{"name":"notebook_path","expression":"`notebook_path`"},{"name":"central_clean_room_id","expression":"`central_clean_room_id`"},{"name":"source_region","expression":"`source_region`"},{"name":"destination_region","expression":"`destination_region`"},{"name":"app_id","expression":"`app_id`"},{"name":"app_name","expression":"`app_name`"},{"name":"metastore_id","expression":"`metastore_id`"},{"name":"private_endpoint_name","expression":"`private_endpoint_name`"},{"name":"storage_api_type","expression":"`storage_api_type`"},{"name":"budget_policy_id","expression":"`budget_policy_id`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"user_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":0,"title":"user_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"user_name"},{"fieldName":"usage_date","dateTimeFormat":"DD/MM/YY","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"date","displayAs":"datetime","visible":true,"order":1,"title":"usage_date","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"usage_date"},{"fieldName":"Total_Discounted","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"decimal","displayAs":"number","visible":true,"order":2,"title":"Total_Discounted","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"Total_Discounted"},{"fieldName":"product","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"product","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"product"},{"fieldName":"cluster_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":4,"title":"cluster_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"cluster_id"},{"fieldName":"shared_compute","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":5,"title":"shared_compute","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"shared_compute"},{"fieldName":"job_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":6,"title":"job_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_id"},{"fieldName":"warehouse_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":7,"title":"warehouse_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"warehouse_id"},{"fieldName":"instance_pool_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":8,"title":"instance_pool_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"instance_pool_id"},{"fieldName":"node_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":9,"title":"node_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"node_type"},{"fieldName":"job_run_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":10,"title":"job_run_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_run_id"},{"fieldName":"notebook_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":11,"title":"notebook_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"notebook_id"},{"fieldName":"dlt_pipeline_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":12,"title":"dlt_pipeline_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dlt_pipeline_id"},{"fieldName":"endpoint_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":13,"title":"endpoint_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"endpoint_name"},{"fieldName":"endpoint_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":14,"title":"endpoint_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"endpoint_id"},{"fieldName":"dlt_update_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":15,"title":"dlt_update_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dlt_update_id"},{"fieldName":"dlt_maintenance_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":16,"title":"dlt_maintenance_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dlt_maintenance_id"},{"fieldName":"run_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":17,"title":"run_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"run_name"},{"fieldName":"job_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":18,"title":"job_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_name"},{"fieldName":"notebook_path","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":19,"title":"notebook_path","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"notebook_path"},{"fieldName":"central_clean_room_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":20,"title":"central_clean_room_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"central_clean_room_id"},{"fieldName":"source_region","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":21,"title":"source_region","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"source_region"},{"fieldName":"destination_region","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":22,"title":"destination_region","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"destination_region"},{"fieldName":"app_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":23,"title":"app_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"app_id"},{"fieldName":"app_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":24,"title":"app_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"app_name"},{"fieldName":"metastore_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":25,"title":"metastore_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"metastore_id"},{"fieldName":"private_endpoint_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":26,"title":"private_endpoint_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"private_endpoint_name"},{"fieldName":"storage_api_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":27,"title":"storage_api_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"storage_api_type"},{"fieldName":"budget_policy_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":28,"title":"budget_policy_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"budget_policy_id"}]},"invisibleColumns":[],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false}},"position":{"x":0,"y":27,"width":6,"height":11}},{"widget":{"name":"8209b8ff","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_user_name","query":{"datasetName":"b75fec9c","fields":[{"name":"user_name","expression":"`user_name`"},{"name":"user_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_user_name","query":{"datasetName":"f5f16814","fields":[{"name":"user_name","expression":"`user_name`"},{"name":"user_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"user_name","displayName":"user_name","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_user_name"},{"fieldName":"user_name","displayName":"user_name","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_user_name"}]},"frame":{"showTitle":true,"title":"User"}}},"position":{"x":3,"y":6,"width":3,"height":1}},{"widget":{"name":"6738f5e9","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_shared_compute","query":{"datasetName":"f5f16814","fields":[{"name":"shared_compute","expression":"`shared_compute`"},{"name":"shared_compute_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_shared_compute","query":{"datasetName":"b75fec9c","fields":[{"name":"shared_compute","expression":"`shared_compute`"},{"name":"shared_compute_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-multi-select","encodings":{"fields":[{"fieldName":"shared_compute","displayName":"shared_compute","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff0703bf11183b041e3277fae6ac0_shared_compute"},{"fieldName":"shared_compute","displayName":"shared_compute","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efefbbc8ed17a7b2ed5b10ccb04f90_shared_compute"}]},"frame":{"showTitle":true,"title":"Shared Compute"}}},"position":{"x":3,"y":8,"width":3,"height":1}}]},{"name":"39b4dc81","displayName":"By Query","layout":[{"widget":{"name":"ba6d0f22","queries":[{"name":"main_query","query":{"datasetName":"866f47b2","fields":[{"name":"client_application","expression":"`client_application`"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"},{"name":"statement_id","expression":"`statement_id`"}],"parameterValues":[{"keyword":"show_top_n","selection":{"values":{"dataType":"STRING","values":[{"value":"1"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"displayName":"Total Runtime (ms)"},"y":{"fieldName":"statement_id","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query ID"},"color":{"fieldName":"client_application","scale":{"type":"categorical"},"displayName":"Client Application"}},"frame":{"showTitle":true,"title":"Top N Runtime by Query ID and Client Application"}}},"position":{"x":0,"y":9,"width":3,"height":11}},{"widget":{"name":"ebb89187","textbox_spec":"# Usage by Query\n## Top N || Daily || Details\n"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"3aebc196","textbox_spec":"## Notes    \n---\n<<<READ ME>>>\n\n- Queries from All Purpose non-serverless compute are not represented here at all\n- This dashboard is processing a lot of data so it will be less performant than the rest\n   \n---"},"position":{"x":0,"y":2,"width":6,"height":3}},{"widget":{"name":"ae96693a","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_start_date","query":{"datasetName":"866f47b2","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_start_date"}]},"frame":{"showTitle":true,"title":"Start Date"}}},"position":{"x":0,"y":5,"width":1,"height":2}},{"widget":{"name":"e07fde35","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_end_date","query":{"datasetName":"866f47b2","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_end_date"}]},"frame":{"showTitle":true,"title":"End Date"}}},"position":{"x":1,"y":5,"width":1,"height":2}},{"widget":{"name":"e90c4e1e","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace","query":{"datasetName":"7e20f9b4","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"workspace_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_workspace","query":{"datasetName":"866f47b2","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_workspace"},{"fieldName":"workspace","displayName":"workspace","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace"}]},"frame":{"showTitle":true,"title":"Workspace"}}},"position":{"x":2,"y":5,"width":1,"height":2}},{"widget":{"name":"5ef1d3a4","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_top_n","query":{"datasetName":"866f47b2","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_top_n"}]},"frame":{"showTitle":true,"title":"Top N"}}},"position":{"x":3,"y":5,"width":1,"height":2}},{"widget":{"name":"a43254de","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_group_percent","query":{"datasetName":"866f47b2","parameters":[{"name":"group_percent","keyword":"group_percent"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"group_percent","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_group_percent"}]},"frame":{"showTitle":true,"title":"Grouping (%)\n","showDescription":true,"description":"Grouping of any items less than X percentage of Total Cost as \"Other\""}}},"position":{"x":4,"y":5,"width":1,"height":2}},{"widget":{"name":"54bb361c","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff28425e51370a911cc28bdaa6688_compute_name","query":{"datasetName":"30b14b54","fields":[{"name":"compute_name","expression":"`compute_name`"},{"name":"compute_name_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_comp_name","query":{"datasetName":"866f47b2","parameters":[{"name":"comp_name","keyword":"comp_name"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"compute_name","displayName":"compute_name","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff28425e51370a911cc28bdaa6688_compute_name"},{"parameterName":"comp_name","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_comp_name"}]},"frame":{"showTitle":true,"title":"Compute Name"}}},"position":{"x":0,"y":7,"width":1,"height":2}},{"widget":{"name":"0f49d3ad","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff2830f4b1f10aabaffdb93751c60_compute_type","query":{"datasetName":"376b0e28","fields":[{"name":"compute_type","expression":"`compute_type`"},{"name":"compute_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_comp_type","query":{"datasetName":"866f47b2","parameters":[{"name":"comp_type","keyword":"comp_type"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"compute_type","displayName":"compute_type","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff2830f4b1f10aabaffdb93751c60_compute_type"},{"parameterName":"comp_type","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_comp_type"}]},"frame":{"showTitle":true,"title":"Compute Type"}}},"position":{"x":5,"y":5,"width":1,"height":2}},{"widget":{"name":"bd2d0795","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff2820d4119978a82bac9468bf526_executed_by","query":{"datasetName":"c0a7a4fa","fields":[{"name":"executed_by","expression":"`executed_by`"},{"name":"executed_by_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_exec_by","query":{"datasetName":"866f47b2","parameters":[{"name":"exec_by","keyword":"exec_by"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"executed_by","displayName":"executed_by","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff2820d4119978a82bac9468bf526_executed_by"},{"parameterName":"exec_by","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_exec_by"}]},"frame":{"showTitle":true,"title":"Executed By"}}},"position":{"x":3,"y":7,"width":1,"height":2}},{"widget":{"name":"d6167604","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff284f045103c8e749e9cb966453f_statement_type","query":{"datasetName":"c6b8391b","fields":[{"name":"statement_type","expression":"`statement_type`"},{"name":"statement_type_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_q_type","query":{"datasetName":"866f47b2","parameters":[{"name":"q_type","keyword":"q_type"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"statement_type","displayName":"statement_type","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff284f045103c8e749e9cb966453f_statement_type"},{"parameterName":"q_type","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_q_type"}]},"frame":{"showTitle":true,"title":"Query Type"}}},"position":{"x":1,"y":7,"width":1,"height":2}},{"widget":{"name":"18839d88","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff284ff9b1ce9818b2f780e867eb1_execution_status","query":{"datasetName":"7179bfa4","fields":[{"name":"execution_status","expression":"`execution_status`"},{"name":"execution_status_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_exec_stat","query":{"datasetName":"866f47b2","parameters":[{"name":"exec_stat","keyword":"exec_stat"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"execution_status","displayName":"execution_status","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff284ff9b1ce9818b2f780e867eb1_execution_status"},{"parameterName":"exec_stat","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_exec_stat"}]},"frame":{"showTitle":true,"title":"Execution Status"}}},"position":{"x":2,"y":7,"width":1,"height":2}},{"widget":{"name":"211a4df0","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff285946e1bcca5d0dd45eca737aa_client_app","query":{"datasetName":"dcf603a6","fields":[{"name":"client_app","expression":"`client_app`"},{"name":"client_app_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_client_app","query":{"datasetName":"866f47b2","parameters":[{"name":"client_app","keyword":"client_app"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"client_app","displayName":"client_app","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff285946e1bcca5d0dd45eca737aa_client_app"},{"parameterName":"client_app","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff253fca31d6482bd062cf99eaea9_client_app"}]},"frame":{"showTitle":true,"title":"Client Application"}}},"position":{"x":4,"y":7,"width":1,"height":2}},{"widget":{"name":"a8bd7e20","queries":[{"name":"main_query","query":{"datasetName":"866f47b2","fields":[{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"},{"name":"client_application","expression":"`client_application`"}],"parameterValues":[{"keyword":"show_top_n","selection":{}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"displayName":"Total Runtime (ms)"},"y":{"fieldName":"client_application","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Client Application"}},"frame":{"showTitle":true,"title":"Runtime by Client Application"}}},"position":{"x":3,"y":9,"width":3,"height":11}},{"widget":{"name":"fdcb7f3c","queries":[{"name":"main_query","query":{"datasetName":"866f47b2","fields":[{"name":"client_application","expression":"`client_application`"},{"name":"daily(end_time)","expression":"DATE_TRUNC(\"DAY\", `end_time`)"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(end_time)","scale":{"type":"temporal"},"displayName":"Run Date"},"y":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"displayName":"Total Runtime (ms)"},"color":{"fieldName":"client_application","scale":{"type":"categorical"},"displayName":"Client Application"}},"frame":{"showTitle":true,"title":"Daily Runtime by Client Application"}}},"position":{"x":0,"y":20,"width":6,"height":6}},{"widget":{"name":"f75a458e","queries":[{"name":"main_query","query":{"datasetName":"866f47b2","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"statement_id","expression":"`statement_id`"},{"name":"executed_by","expression":"`executed_by`"},{"name":"executed_as","expression":"`executed_as`"},{"name":"session_id","expression":"`session_id`"},{"name":"execution_status","expression":"`execution_status`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"compute_id","expression":"`compute_id`"},{"name":"compute_name","expression":"`compute_name`"},{"name":"statement_text","expression":"`statement_text`"},{"name":"statement_type","expression":"`statement_type`"},{"name":"error_message","expression":"`error_message`"},{"name":"client_application","expression":"`client_application`"},{"name":"client_driver","expression":"`client_driver`"},{"name":"total_duration_ms","expression":"`total_duration_ms`"},{"name":"waiting_for_compute_duration_ms","expression":"`waiting_for_compute_duration_ms`"},{"name":"waiting_at_capacity_duration_ms","expression":"`waiting_at_capacity_duration_ms`"},{"name":"execution_duration_ms","expression":"`execution_duration_ms`"},{"name":"compilation_duration_ms","expression":"`compilation_duration_ms`"},{"name":"total_task_duration_ms","expression":"`total_task_duration_ms`"},{"name":"result_fetch_duration_ms","expression":"`result_fetch_duration_ms`"},{"name":"start_time","expression":"`start_time`"},{"name":"end_time","expression":"`end_time`"},{"name":"update_time","expression":"`update_time`"},{"name":"read_partitions","expression":"`read_partitions`"},{"name":"pruned_files","expression":"`pruned_files`"},{"name":"read_files","expression":"`read_files`"},{"name":"read_rows","expression":"`read_rows`"},{"name":"produced_rows","expression":"`produced_rows`"},{"name":"read_bytes","expression":"`read_bytes`"},{"name":"read_io_cache_percent","expression":"`read_io_cache_percent`"},{"name":"from_result_cache","expression":"`from_result_cache`"},{"name":"spilled_local_bytes","expression":"`spilled_local_bytes`"},{"name":"written_bytes","expression":"`written_bytes`"},{"name":"shuffle_read_bytes","expression":"`shuffle_read_bytes`"},{"name":"job_info","expression":"`job_info`"},{"name":"legacy_dashboard_id","expression":"`legacy_dashboard_id`"},{"name":"dashboard_id","expression":"`dashboard_id`"},{"name":"alert_id","expression":"`alert_id`"},{"name":"notebook_id","expression":"`notebook_id`"},{"name":"sql_query_id","expression":"`sql_query_id`"},{"name":"genie_space_id","expression":"`genie_space_id`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"workspace","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100000,"title":"workspace","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"workspace"},{"fieldName":"statement_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100001,"title":"statement_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_id"},{"fieldName":"executed_by","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100002,"title":"executed_by","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"executed_by"},{"fieldName":"executed_as","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100003,"title":"executed_as","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"executed_as"},{"fieldName":"session_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100004,"title":"session_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"session_id"},{"fieldName":"execution_status","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100005,"title":"execution_status","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"execution_status"},{"fieldName":"compute_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100006,"title":"compute_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"compute_type"},{"fieldName":"compute_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100007,"title":"compute_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"compute_id"},{"fieldName":"compute_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100008,"title":"compute_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"compute_name"},{"fieldName":"statement_text","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100009,"title":"statement_text","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_text"},{"fieldName":"statement_type","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100010,"title":"statement_type","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"statement_type"},{"fieldName":"error_message","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100011,"title":"error_message","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"error_message"},{"fieldName":"client_application","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100012,"title":"client_application","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"client_application"},{"fieldName":"client_driver","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100013,"title":"client_driver","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"client_driver"},{"fieldName":"total_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100014,"title":"total_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"total_duration_ms"},{"fieldName":"waiting_for_compute_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100015,"title":"waiting_for_compute_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"waiting_for_compute_duration_ms"},{"fieldName":"waiting_at_capacity_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100016,"title":"waiting_at_capacity_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"waiting_at_capacity_duration_ms"},{"fieldName":"execution_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100017,"title":"execution_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"execution_duration_ms"},{"fieldName":"compilation_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100018,"title":"compilation_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"compilation_duration_ms"},{"fieldName":"total_task_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100019,"title":"total_task_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"total_task_duration_ms"},{"fieldName":"result_fetch_duration_ms","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100020,"title":"result_fetch_duration_ms","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"result_fetch_duration_ms"},{"fieldName":"start_time","dateTimeFormat":"DD/MM/YY HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":100021,"title":"start_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"start_time"},{"fieldName":"end_time","dateTimeFormat":"DD/MM/YY HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":100022,"title":"end_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"end_time"},{"fieldName":"update_time","dateTimeFormat":"DD/MM/YY HH:mm:ss.SSS","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"datetime","displayAs":"datetime","visible":true,"order":100023,"title":"update_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"update_time"},{"fieldName":"read_partitions","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100024,"title":"read_partitions","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_partitions"},{"fieldName":"pruned_files","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100025,"title":"pruned_files","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"pruned_files"},{"fieldName":"read_files","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100026,"title":"read_files","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_files"},{"fieldName":"read_rows","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100027,"title":"read_rows","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_rows"},{"fieldName":"produced_rows","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100028,"title":"produced_rows","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"produced_rows"},{"fieldName":"read_bytes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100029,"title":"read_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_bytes"},{"fieldName":"read_io_cache_percent","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100030,"title":"read_io_cache_percent","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"read_io_cache_percent"},{"fieldName":"from_result_cache","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"boolean","displayAs":"boolean","visible":true,"order":100031,"title":"from_result_cache","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"from_result_cache"},{"fieldName":"spilled_local_bytes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100032,"title":"spilled_local_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"spilled_local_bytes"},{"fieldName":"written_bytes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100033,"title":"written_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"written_bytes"},{"fieldName":"shuffle_read_bytes","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100034,"title":"shuffle_read_bytes","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"shuffle_read_bytes"},{"fieldName":"job_info","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"complex","displayAs":"json","visible":true,"order":100035,"title":"job_info","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_info"},{"fieldName":"legacy_dashboard_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100036,"title":"legacy_dashboard_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"legacy_dashboard_id"},{"fieldName":"dashboard_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100037,"title":"dashboard_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"dashboard_id"},{"fieldName":"alert_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100038,"title":"alert_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"alert_id"},{"fieldName":"notebook_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100039,"title":"notebook_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"notebook_id"},{"fieldName":"sql_query_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100040,"title":"sql_query_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"sql_query_id"},{"fieldName":"genie_space_id","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100041,"title":"genie_space_id","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"genie_space_id"}]},"invisibleColumns":[],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"title":"Query Details"}}},"position":{"x":0,"y":38,"width":6,"height":12}},{"widget":{"name":"d0b70235","queries":[{"name":"main_query","query":{"datasetName":"866f47b2","fields":[{"name":"execution_status","expression":"`execution_status`"},{"name":"daily(end_time)","expression":"DATE_TRUNC(\"DAY\", `end_time`)"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(end_time)","scale":{"type":"temporal"},"displayName":"Run Date"},"y":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"displayName":"Total Runtime (ms)"},"color":{"fieldName":"execution_status","scale":{"type":"categorical","mappings":[{"value":"FAILED","color":"#ff4900"},{"value":"FINISHED","color":"#398b50"}]},"displayName":"Execution Status"}},"frame":{"showTitle":true,"title":"Daily Runtime by Execution Status"}}},"position":{"x":0,"y":26,"width":6,"height":6}},{"widget":{"name":"fa2ad368","queries":[{"name":"main_query","query":{"datasetName":"866f47b2","fields":[{"name":"compute_type","expression":"`compute_type`"},{"name":"daily(end_time)","expression":"DATE_TRUNC(\"DAY\", `end_time`)"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(end_time)","scale":{"type":"temporal"},"displayName":"Run Date"},"y":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"displayName":"Total Runtime (ms)"},"color":{"fieldName":"compute_type","scale":{"type":"categorical","mappings":[{"value":"FAILED","color":"#ff4900"},{"value":"FINISHED","color":"#398b50"}]},"displayName":"Compute Type"}}}},"position":{"x":0,"y":32,"width":6,"height":6}}]},{"name":"b3c64d10","displayName":"Performance Tuning","layout":[{"widget":{"name":"d75ef6bc","queries":[{"name":"main_query","query":{"datasetName":"8c54b818","fields":[{"name":"avg_mem_swap_percent","expression":"`avg_mem_swap_percent`"},{"name":"cluster_name","expression":"`cluster_name`"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"avg_mem_swap_percent","scale":{"type":"quantitative"},"axis":{"hideTitle":false,"title":"Avg Mem Swap %"},"displayName":"Avg Mem Swap"},"y":{"fieldName":"cluster_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"axis":{"title":"Cluster Name","hideTitle":false},"displayName":"Cluster Name"},"label":{"show":true}},"frame":{"showTitle":false},"mark":{"colors":["#992121","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":11,"width":3,"height":7}},{"widget":{"name":"6c5798c1","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_start_date","query":{"datasetName":"8c54b818","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_start_date","query":{"datasetName":"586c4aa4","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_start_date"},{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_start_date"}]},"selection":{"defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-30d/d"}]}}},"frame":{"showTitle":true,"title":"Start Date"}}},"position":{"x":0,"y":6,"width":3,"height":1}},{"widget":{"name":"35d81274","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_end_date","query":{"datasetName":"8c54b818","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_end_date","query":{"datasetName":"586c4aa4","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_end_date"},{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_end_date"}]},"selection":{"defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},"frame":{"showTitle":true,"title":"End Date"}}},"position":{"x":3,"y":6,"width":3,"height":1}},{"widget":{"name":"ec2b6b81","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_top_n","query":{"datasetName":"8c54b818","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_top_n","query":{"datasetName":"586c4aa4","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_top_n"},{"parameterName":"top_n","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_top_n"}]},"frame":{"showTitle":true,"title":"Top N"}}},"position":{"x":3,"y":5,"width":3,"height":1}},{"widget":{"name":"55cbdaa2","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace","query":{"datasetName":"7e20f9b4","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"workspace_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_workspace","query":{"datasetName":"8c54b818","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_workspace","query":{"datasetName":"586c4aa4","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe5b3561213dd9dfe1a4a4657543c_workspace"},{"fieldName":"workspace","displayName":"workspace","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01eff315dab71ac7b6bc3b88358898fe_workspace"}]},"frame":{"showTitle":true,"title":"Workspace"}}},"position":{"x":0,"y":5,"width":3,"height":1}},{"widget":{"name":"627c3492","textbox_spec":"## Clusters Experiencing Memory Swapping\n- ***Signal***: High memory swap indicates that the cluster is switching from using RAM memory to disk due to insufficient memory which is orders of magnitude slower\n- ***Action***: Investigate cluster to determine if this is a code issue or a compute cluster sizing issue. If determined to be a compute cluster sizing issue, change underlying worker type/driver type for increased memory"},"position":{"x":0,"y":8,"width":3,"height":3}},{"widget":{"name":"6a3dc8de","textbox_spec":"# Performance Tuning Signals"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"248efc0a","textbox_spec":"## Clusters with High Memory Usage\n- ***Signal***: This signal is a precursor to memory swappping and if acted upon can prevent memory swapping from occurring in the first place\n- ***Action***: Investigate cluster to determine if this is a code issue or a compute cluster sizing issue. If determined to be a compute cluster sizing issue, change underlying worker type/driver type for increased memory"},"position":{"x":3,"y":8,"width":3,"height":3}},{"widget":{"name":"aff21b97","queries":[{"name":"main_query","query":{"datasetName":"8c54b818","fields":[{"name":"avg_mem_swap_percent","expression":"`avg_mem_swap_percent`"},{"name":"cluster_name","expression":"`cluster_name`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"cpu_user_percent"}]}}}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"avg_mem_swap_percent","scale":{"type":"quantitative"},"axis":{"hideTitle":false,"title":"Avg CPU Usage % (User)"},"displayName":"Avg CPU Usage % (User)"},"y":{"fieldName":"cluster_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"axis":{"title":"Cluster Name","hideTitle":false},"displayName":"Cluster Name"},"label":{"show":true}},"frame":{"showTitle":false},"mark":{"colors":["#996d21","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":3,"y":21,"width":3,"height":7}},{"widget":{"name":"2b8f8274","queries":[{"name":"main_query","query":{"datasetName":"8c54b818","fields":[{"name":"avg_mem_swap_percent","expression":"`avg_mem_swap_percent`"},{"name":"cluster_name","expression":"`cluster_name`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"cpu_wait_percent"}]}}}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"avg_mem_swap_percent","scale":{"type":"quantitative"},"axis":{"hideTitle":false,"title":"Avg CPU Wait %"},"displayName":"Avg CPU Wait %"},"y":{"fieldName":"cluster_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"axis":{"title":"Cluster Name","hideTitle":false},"displayName":"Cluster Name"},"label":{"show":true}},"frame":{"showTitle":false},"mark":{"colors":["#992121","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":21,"width":3,"height":7}},{"widget":{"name":"6999c3ed","queries":[{"name":"main_query","query":{"datasetName":"8c54b818","fields":[{"name":"avg_mem_swap_percent","expression":"`avg_mem_swap_percent`"},{"name":"cluster_name","expression":"`cluster_name`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"mem_used_percent"}]}}}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"avg_mem_swap_percent","scale":{"type":"quantitative"},"axis":{"hideTitle":false,"title":"Avg Mem Used %"},"displayName":"Avg Mem Used %"},"y":{"fieldName":"cluster_name","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"axis":{"title":"Cluster Name","hideTitle":false},"displayName":"Cluster Name"},"label":{"show":true}},"frame":{"showTitle":false},"mark":{"colors":["#992121","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":3,"y":11,"width":3,"height":7}},{"widget":{"name":"8c43a553","textbox_spec":"## Clusters Experiencing High CPU Waits\n- ***Signal***: High CPU waits imply that the CPUs of the cluster are waiting on other resources such as Network or Disk I/O rather than actively processing workloads which essentially means the cluster is not operating efficiently when it is showing high average wait times\n- ***Action***: Investigate cluster to determine what resources it is waiting for"},"position":{"x":0,"y":18,"width":3,"height":3}},{"widget":{"name":"b8fffb99","textbox_spec":"## Clusters Experiencing High CPU Usage\n- ***Signal***: High CPU Usage on its own does not imply a negative impact as it can also mean that the cluster is utilizing all resources effectively, this signal can sometimes imply that the CPU sizing of the compute cluster is the limitation when additional performance is needed\n- ***Action***: No actions needed unless additional performance is needed for a particular cluster"},"position":{"x":3,"y":18,"width":3,"height":3}},{"widget":{"name":"d531e997","textbox_spec":"## Notes\n---\n<<<READ ME>>>\n\n- This section is primarily split into two parts, Cluster Signals and Query Signals\n- Each section covers a partial scope of compute\n\n---"},"position":{"x":0,"y":2,"width":6,"height":3}},{"widget":{"name":"cf9f6847","queries":[{"name":"main_query","query":{"datasetName":"586c4aa4","fields":[{"name":"compute_id","expression":"`compute_id`"},{"name":"compute_name","expression":"`compute_name`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"client_application","expression":"`client_application`"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"},{"name":"statement_id","expression":"`statement_id`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"total_duration_ms"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"displayName":"Total Runtime (ms)"},"y":{"fieldName":"statement_id","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query ID"},"label":{"show":true},"extra":[{"fieldName":"compute_id","displayName":"compute_id"},{"fieldName":"compute_name","displayName":"compute_name"},{"fieldName":"compute_type","displayName":"compute_type"},{"fieldName":"client_application","displayName":"client_application"}]},"mark":{"colors":["#993821","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":32,"width":3,"height":7}},{"widget":{"name":"5d9265ff","queries":[{"name":"main_query","query":{"datasetName":"586c4aa4","fields":[{"name":"compute_id","expression":"`compute_id`"},{"name":"compute_name","expression":"`compute_name`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"client_application","expression":"`client_application`"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"},{"name":"statement_id","expression":"`statement_id`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"spilled_local_bytes"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"axis":{"title":"Spilled Local Bytes ("},"displayName":"Total Runtime (ms)"},"y":{"fieldName":"statement_id","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query ID"},"label":{"show":true},"extra":[{"fieldName":"compute_id","displayName":"compute_id"},{"fieldName":"compute_name","displayName":"compute_name"},{"fieldName":"compute_type","displayName":"compute_type"},{"fieldName":"client_application","displayName":"client_application"}]},"mark":{"colors":["#992121","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":3,"y":32,"width":3,"height":7}},{"widget":{"name":"9f30ccba","queries":[{"name":"main_query","query":{"datasetName":"586c4aa4","fields":[{"name":"compute_id","expression":"`compute_id`"},{"name":"compute_name","expression":"`compute_name`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"client_application","expression":"`client_application`"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"},{"name":"statement_id","expression":"`statement_id`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"waiting_at_capacity_duration_ms"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"axis":{"title":"Waiting for Compute Capacity (ms)"},"displayName":"Total Runtime (ms)"},"y":{"fieldName":"statement_id","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query ID"},"label":{"show":true},"extra":[{"fieldName":"compute_id","displayName":"compute_id"},{"fieldName":"compute_name","displayName":"compute_name"},{"fieldName":"compute_type","displayName":"compute_type"},{"fieldName":"client_application","displayName":"client_application"}]},"mark":{"colors":["#992121","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":42,"width":3,"height":7}},{"widget":{"name":"34d4a5da","queries":[{"name":"main_query","query":{"datasetName":"586c4aa4","fields":[{"name":"compute_id","expression":"`compute_id`"},{"name":"compute_name","expression":"`compute_name`"},{"name":"compute_type","expression":"`compute_type`"},{"name":"client_application","expression":"`client_application`"},{"name":"sum(total_duration_ms)","expression":"SUM(`total_duration_ms`)"},{"name":"statement_id","expression":"`statement_id`"}],"parameterValues":[{"keyword":"rank_by","selection":{"values":{"dataType":"STRING","values":[{"value":"shuffle_read_bytes"}]}}}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"sum(total_duration_ms)","scale":{"type":"quantitative"},"axis":{"title":"Shuffle Read Bytes"},"displayName":"Total Runtime (ms)"},"y":{"fieldName":"statement_id","scale":{"type":"categorical","sort":{"by":"x-reversed"}},"displayName":"Query ID"},"label":{"show":true},"extra":[{"fieldName":"compute_id","displayName":"compute_id"},{"fieldName":"compute_name","displayName":"compute_name"},{"fieldName":"compute_type","displayName":"compute_type"},{"fieldName":"client_application","displayName":"client_application"}]},"mark":{"colors":["#992121","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":3,"y":42,"width":3,"height":7}},{"widget":{"name":"73e00c8c","textbox_spec":"## Queries Experiencing the Longest Runtimes\n- ***Signal***: While there are some queries that will legitimately take a long time to execute based on their compute sizing, code complexity, data size, etc, this list does provide a starting point to investigate queries with long runtimes that can be investigated for performance improvements\n- ***Action***: Investigate queries to determine whether or not their runtimes are acceptable and what can be improved"},"position":{"x":0,"y":29,"width":3,"height":3}},{"widget":{"name":"988dd555","textbox_spec":"## Queries Experiencing High Waits for Compute Capacity\n- ***Signal***: This signals insufficient resources causing the below queries to be queued until resources are available\n- ***Action***: Investigate the compute cluster to determine if horizontal scaling is necessary (additional workers), also consider switching to serverless for better workload management or resizing the SQL Warehouse for additional workers"},"position":{"x":0,"y":39,"width":3,"height":3}},{"widget":{"name":"d9eb725a","textbox_spec":"## Queries Experiencing the Highest Spilled Bytes\n- ***Signal***: High values can indicate that your workload is memory-constrained, forcing data to be written to disk which is orders of magnitude slower than in-memory operations\n- ***Action***: Investigate either code efficiency or the compute sizing to ensure that any memory contention is resolved"},"position":{"x":3,"y":29,"width":3,"height":3}},{"widget":{"name":"0b91d46a","textbox_spec":"## Queries Experiencing High Shuffle Read Bytes\n- ***Signal***: High shuffle read bytes signal a heavy distribution of data which might slow down queries due to increased network I/O and latency\n- ***Action***: Excessive shuffling might be a sign to review your partitioning strategies or join methods, reducing shuffle volume (via broadcast joins, partition pruning, liquid clustering, etc) can improve performance."},"position":{"x":3,"y":39,"width":3,"height":3}},{"widget":{"name":"8957dd27","textbox_spec":"## Compute Signals"},"position":{"x":0,"y":7,"width":6,"height":1}},{"widget":{"name":"504ad849","textbox_spec":"## Query Signals"},"position":{"x":0,"y":28,"width":6,"height":1}}]},{"name":"7ec5641c","displayName":"Miscellaneous","layout":[{"widget":{"name":"9e4782b1","queries":[{"name":"main_query","query":{"datasetName":"4b93687d","fields":[{"name":"billing_origin_product","expression":"`billing_origin_product`"},{"name":"monthly(usage_date)","expression":"DATE_TRUNC(\"MONTH\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"billing_origin_product","scale":{"type":"categorical"},"displayName":"Product"}},"frame":{"showTitle":true,"title":"Monthly by Product"}}},"position":{"x":0,"y":4,"width":6,"height":6}},{"widget":{"name":"22ff4d02","textbox_spec":"# Usage by Product\nThis dashboard shows usage for all other parts of the Databricks platform generally associated with background processes outside of the most common workloads"},"position":{"x":0,"y":0,"width":6,"height":2}},{"widget":{"name":"2485c8de","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_start_date","query":{"datasetName":"4b93687d","parameters":[{"name":"start_date","keyword":"start_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"start_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_start_date"}]},"frame":{"showTitle":true,"title":"Start Date"}}},"position":{"x":0,"y":3,"width":3,"height":1}},{"widget":{"name":"7b6e4810","queries":[{"name":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace","query":{"datasetName":"7e20f9b4","fields":[{"name":"workspace","expression":"`workspace`"},{"name":"workspace_associativity","expression":"COUNT_IF(`associative_filter_predicate_group`)"}],"disaggregated":false}},{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_workspace","query":{"datasetName":"4b93687d","parameters":[{"name":"workspace","keyword":"workspace"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"fieldName":"workspace","displayName":"workspace","queryName":"dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efe72997f51980be00abd0563aaccd_workspace"},{"parameterName":"workspace","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_workspace"}]},"frame":{"showTitle":false,"showDescription":true,"description":"Workspace"}}},"position":{"x":0,"y":2,"width":6,"height":1}},{"widget":{"name":"b5fd4450","queries":[{"name":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_end_date","query":{"datasetName":"4b93687d","parameters":[{"name":"end_date","keyword":"end_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-date-picker","encodings":{"fields":[{"parameterName":"end_date","queryName":"parameter_dashboards/01efe5ad6ba3182081415822fd36ec45/datasets/01efef4c072312129d4b7c9ed014e9bd_end_date"}]},"frame":{"showTitle":true,"title":"End Date"}}},"position":{"x":3,"y":3,"width":3,"height":1}},{"widget":{"name":"1d0a0da2","queries":[{"name":"main_query","query":{"datasetName":"4b93687d","fields":[{"name":"billing_origin_product","expression":"`billing_origin_product`"},{"name":"daily(usage_date)","expression":"DATE_TRUNC(\"DAY\", `usage_date`)"},{"name":"sum(total_discounted)","expression":"SUM(`total_discounted`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"daily(usage_date)","scale":{"type":"temporal"},"displayName":"Month"},"y":{"fieldName":"sum(total_discounted)","scale":{"type":"quantitative"},"format":{"type":"number-currency","currencyCode":"USD","abbreviation":"compact","decimalPlaces":{"type":"max","places":2}},"displayName":"$DBU Usage"},"color":{"fieldName":"billing_origin_product","scale":{"type":"categorical"},"displayName":"Product"}},"frame":{"showTitle":true,"title":"Monthly by Product"}}},"position":{"x":0,"y":10,"width":6,"height":6}}]}]}